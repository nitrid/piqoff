"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[1115],{55585:(t,e,i)=>{i.d(e,{ZP:()=>p});var a=i(15671),n=i(43144),r=i(97326),s=i(60136),l=i(82963),o=i(61120),d=i(67294),c=i(60250),u=i.n(c);var p=function(t){(0,s.Z)(p,t);var e,i,c=(e=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,o.Z)(e);if(i){var n=(0,o.Z)(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return(0,l.Z)(this,t)});function p(t){var e;return(0,a.Z)(this,p),(e=c.call(this,t)).state.value=void 0!==t.value&&t.value,e._onValueChanged=e._onValueChanged.bind((0,r.Z)(e)),e}return(0,n.Z)(p,[{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(t)}},{key:"value",get:function(){return this.state.value},set:function(t){var e=this;if(void 0!==t){if(void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t;else{var i=this.props.dt.data.where(this.props.dt.filter);i.length>0&&(void 0!==this.props.dt.row&&void 0!==i.find((function(t){return t===e.props.dt.row}))?i.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:i[i.length-1][this.props.dt.field]=t)}this.setState({value:t})}}},{key:"render",value:function(){return d.createElement(u(),{id:this.props.id,defaultValue:this.props.defaultValue,value:this.state.value,text:this.props.text,onValueChanged:this._onValueChanged},this.props.children,this.validationView())}}]),p}(i(20819).ZP)},51559:(t,e,i)=>{i.d(e,{ZP:()=>m});var a=i(15861),n=i(15671),r=i(43144),s=i(97326),l=i(60136),o=i(82963),d=i(61120),c=i(64687),u=i.n(c),p=i(67294),h=i(11694),E=i.n(h);var m=function(t){(0,l.Z)(m,t);var e,i,c,h=(i=m,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,d.Z)(i);if(c){var a=(0,d.Z)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,o.Z)(this,t)});function m(t){var e;return(0,n.Z)(this,m),(e=h.call(this,t)).dev=null,e.state.value=void 0!==t.value?t.value:"",e.state.placeholder=void 0===t.placeholder?"":t.placeholder,e._onInitialized=e._onInitialized.bind((0,s.Z)(e)),e._onValueChanged=e._onValueChanged.bind((0,s.Z)(e)),e}return(0,r.Z)(m,[{key:"_onInitialized",value:function(t){this.dev=t.component}},{key:"_TagBoxView",value:function(){return p.createElement(E(),{id:this.props.id,items:[],acceptCustomValue:!0,onValueChanged:this._onValueChanged,placeholder:this.state.placeholder,openOnFieldClick:!1,showClearButton:!0,maxFilterQueryLength:1e4,noDataText:""},this.props.children,this.validationView())}},{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(t)}},{key:"value",get:function(){return this.state.value},set:function(t){var e=this;if(void 0!==t){if(void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?(this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t,void 0!==this.props.dt.display&&(this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.display]=this.displayValue)):(this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t,void 0!==this.props.dt.display&&(this.props.dt.data[this.props.dt.data.length-1][this.props.dt.display]=this.displayValue));else{var i=this.props.dt.data.where(this.props.dt.filter);i.length>0&&(void 0!==this.props.dt.row&&void 0!==i.find((function(t){return t===e.props.dt.row}))?(i.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t,void 0!==this.props.dt.display&&(i.find((function(t){return t===e.props.dt.row}))[this.props.dt.display]=this.displayValue)):(i[i.length-1][this.props.dt.field]=t,void 0!==this.props.dt.display&&(i[i.length-1][this.props.dt.display]=this.displayValue)))}this.setState({value:null==t?"":t})}}},{key:"displayValue",get:function(){return this.dev.option("displayValue")}},{key:"componentDidMount",value:(e=(0,a.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.state.data){t.next=3;break}return t.next=3,this.dataRefresh(this.state.data);case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){return void 0!==this.props.simple&&this.props.simple?this._TagBoxView():p.createElement("div",{className:"dx-field"},p.createElement("div",{className:"dx-field-label"},void 0===this.props.title?"":this.props.title),p.createElement("div",{className:"dx-field-value"},this._TagBoxView()))}}]),m}(i(20819).ZP)},1115:(t,e,i)=>{i.r(e),i.d(e,{default:()=>y});var a=i(15861),n=i(15671),r=i(43144),s=i(97326),l=i(60136),o=i(82963),d=i(61120),c=i(64687),u=i.n(c),p=i(67294),h=i(73364),E=i(28996),m=(i(30381),i(42866)),f=i.n(m),v=i(53221),g=i.n(v),R=i(25552),C=i.n(R),w=(i(65580),i(91686),i(30886),i(99846)),x=(i(5083),i(99077)),b=(i(55585),i(417),i(32175),i(18405)),O=i(73682),I=(i(90428),i(57941),i(51559)),S=i(60547);i(17276),i(51166);var y=function(t){(0,l.Z)(T,t);var e,i,c,m,v,y,N=(v=T,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,d.Z)(v);if(y){var i=(0,d.Z)(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return(0,o.Z)(this,t)});function T(t){var e;return(0,n.Z)(this,T),(e=N.call(this,t)).core=h.Z.instance.core,e.prmObj=e.param.filter({TYPE:1,USERS:e.user.CODE}),e.acsobj=e.access.filter({TYPE:1,USERS:e.user.CODE}),e.editObj=new E.sD,e._cellRoleRender=e._cellRoleRender.bind((0,s.Z)(e)),e._btnGetClick=e._btnGetClick.bind((0,s.Z)(e)),e}return(0,r.Z)(T,[{key:"componentDidMount",value:function(){var t=this;setTimeout((0,a.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.init();case 1:case"end":return e.stop()}}),e)}))),1e3)}},{key:"init",value:(m=(0,a.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.editObj.clearAll(),t.next=3,this.grdItemList.dataRefresh({source:this.editObj.dt("ITEM_EDIT")});case 3:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"_btnGetClick",value:(c=(0,a.Z)(u().mark((function t(){var e,i,a,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=this.txtName.value&&"*"!=this.txtName.value.slice(-1)&&(e=this.txtName.value+"*",this.txtName.setState({value:e})),i="",1==this.txtCode.value.length)i="((CODE LIKE '"+this.txtCode.value[0]+"' + '%') OR (BARCODE LIKE '"+this.txtCode.value[0]+"' + '%') OR (MULTICODE LIKE '"+this.txtCode.value[0]+"' + '%')) AND";else if(this.txtCode.value.length>1){for(a="",n=0;n<this.txtCode.value.length;n++)a=a+",'"+this.txtCode.value[n]+"'";i="((CODE IN ("+a.substring(1,a.length)+")) OR (BARCODE IN ("+a.substring(1,a.length)+")) OR (MULTICODE IN ("+a.substring(1,a.length)+"))) AND"}return h.Z.instance.setState({isExecute:!0}),t.next=6,this.editObj.load({NAME:this.txtName.value.replaceAll("*","%"),MAIN_GRP:this.cmbItemGroup.value,CUSTOMER_CODE:this.cmbTedarikci.value,QUERY:i});case 6:h.Z.instance.setState({isExecute:!1}),this.netMargin(),this.grossMargin();case 9:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_cellRoleRender",value:function(t){return"ORGINS"==t.column.dataField?p.createElement(x.ZP,{simple:!0,parent:this,id:"cmbOrigin",displayExpr:"NAME",valueExpr:"CODE",notRefresh:!0,value:"",searchEnabled:!0,pageSize:50,showClearButton:!0,onValueChanged:function(e){t.setValue(e.value)},data:{source:{select:{query:"SELECT CODE,NAME FROM COUNTRY ORDER BY CODE ASC"},sql:this.core.sql}}}):"VAT"==t.column.dataField?p.createElement(x.ZP,{simple:!0,parent:this,id:"clmVat",displayExpr:"VAT",valueExpr:"VAT",notRefresh:!0,value:"0",searchEnabled:!0,pageSize:50,showClearButton:!0,onValueChanged:function(e){t.setValue(e.value)},data:{source:{select:{query:"SELECT VAT FROM VAT ORDER BY ID ASC"},sql:this.core.sql}}}):void 0}},{key:"grossMargin",value:(i=(0,a.Z)(u().mark((function t(){var e,i,a,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.editObj.dt().length;e++)i=this.editObj.dt()[e].PRICE_SALE/(this.editObj.dt()[e].VAT/100+1),a=i-this.editObj.dt()[e].CUSTOMER_PRICE,n=(i-this.editObj.dt()[e].CUSTOMER_PRICE)/i*100,this.editObj.dt()[e].GROSS_MARGIN=a.toFixed(2)+"€ / %"+n.toFixed(2),this.editObj.dt()[e].GROSS_MARGIN_RATE=n.toFixed(2);return t.next=3,this.grdItemList.dataRefresh({source:this.editObj.dt()});case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"netMargin",value:(e=(0,a.Z)(u().mark((function t(){var e,i,a,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.editObj.dt().length;e++)i=this.editObj.dt()[e].PRICE_SALE/(this.editObj.dt()[e].VAT/100+1),a=(i-this.editObj.dt()[e].CUSTOMER_PRICE)/1.12,n=(i-this.editObj.dt()[e].CUSTOMER_PRICE)/1.12/i*100,this.editObj.dt()[e].NET_MARGIN=a.toFixed(2)+"€ / %"+n.toFixed(2),this.editObj.dt()[e].NET_MARGIN_RATE=n.toFixed(2);return t.next=3,this.grdItemList.dataRefresh({source:this.editObj.dt()});case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t,e=this;return p.createElement("div",null,p.createElement(f(),null,p.createElement("div",{className:"row px-2 pt-2"},p.createElement("div",{className:"col-12"},p.createElement(g(),null,p.createElement(R.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(t=(0,a.Z)(u().mark((function t(){var i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={id:"msgClose",showTitle:!0,title:e.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.lang.t("btnYes"),location:"before"},{id:"btn02",caption:e.lang.t("btnNo"),location:"after"}],content:p.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.lang.t("msgClose"))},t.next=3,(0,S.W)(i);case 3:"btn01"==t.sent&&h.Z.instance.panel.closePage();case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}})))),p.createElement("div",{className:"row px-2 pt-2"},p.createElement("div",{className:"col-12"},p.createElement(C(),{colCount:2,id:"frmCriter"},p.createElement(R.Item,null,p.createElement(R.Label,{text:this.t("txtCode"),alignment:"right"}),p.createElement(I.ZP,{id:"txtCode",parent:this,simple:!0,value:[],placeholder:this.t("codePlaceHolder")})),p.createElement(R.Item,null,p.createElement(R.Label,{text:this.t("txtCustomerCode"),alignment:"right"}),p.createElement(x.ZP,{simple:!0,parent:this,id:"cmbTedarikci",showClearButton:!0,notRefresh:!0,searchEnabled:!0,displayExpr:"TITLE",valueExpr:"CODE",data:{source:{select:{query:"SELECT CODE,TITLE FROM CUSTOMER_VW_01 WHERE TYPE IN(1,2) ORDER BY TITLE ASC"},sql:this.core.sql}}})),p.createElement(R.Item,null,p.createElement(R.Label,{text:this.t("txtName"),alignment:"right"}),p.createElement(w.ZP,{id:"txtName",parent:this,simple:!0,placeholder:this.t("namePlaceHolder"),onEnterKey:this._btnGetClick,onChange:(0,a.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"txtName",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtName",USERS:this.user.CODE})})),p.createElement(R.Item,null,p.createElement(R.Label,{text:this.t("cmbItemGroup"),alignment:"right"}),p.createElement(x.ZP,{simple:!0,parent:this,id:"cmbItemGroup",displayExpr:"NAME",valueExpr:"CODE",value:"",showClearButton:!0,searchEnabled:!0,notRefresh:!0,onValueChanged:(0,a.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),data:{source:{select:{query:"SELECT CODE,NAME FROM ITEM_GROUP ORDER BY NAME ASC"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbItemGroup",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbItemGroup",USERS:this.user.CODE}),button:[{id:"02",icon:"clear",onClick:function(){e.cmbItemGroup.valueExpr=""}}]}))))),p.createElement("div",{className:"row px-2 pt-2"},p.createElement("div",{className:"col-3"}),p.createElement("div",{className:"col-3"}),p.createElement("div",{className:"col-3"}),p.createElement("div",{className:"col-3"},p.createElement(O.Z,{text:this.t("btnGet"),type:"success",width:"100%",onClick:this._btnGetClick}))),p.createElement("div",{className:"row px-2 pt-2"},p.createElement("div",{className:"col-12"},p.createElement(b.ZP,{id:"grdItemList",parent:this,showBorders:!0,filterRow:{visible:!0},headerFilter:{visible:!0},columnAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,loadPanel:{enabled:!0},height:"100%",width:"100%",dbApply:!1,selection:{mode:"single"},onRowUpdating:function(){var t=(0,a.Z)(u().mark((function t(i){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(i),e.grossMargin(),e.netMargin();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowClick:function(){var t=(0,a.Z)(u().mark((function t(i){var a,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=[],n=0;n<e.editObj.dt().length;n++)e.editObj.dt()[n].CODE==i.data.CODE&&a.push(e.grdItemList.devGrid.getRowIndexByKey(e.editObj.dt()[n]));e.grdItemList.devGrid.selectRowsByIndexes(a);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onSaved:function(){var t=(0,a.Z)(u().mark((function t(i){var a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={id:"msgSaveResult",showTitle:!0,title:e.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgSave.btn01"),location:"after"}]},h.Z.instance.setState({isExecute:!0}),t.next=4,e.editObj.save();case 4:if(t.t0=t.sent,0!=t.t0){t.next=12;break}return h.Z.instance.setState({isExecute:!1}),a.content=p.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"green"}},e.t("msgSaveResult.msgSuccess")),t.next=10,(0,S.W)(a);case 10:t.next=16;break;case 12:return h.Z.instance.setState({isExecute:!1}),a.content=p.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},e.t("msgSaveResult.msgFailed")),t.next=16,(0,S.W)(a);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onCellPrepared:function(t){if("data"===t.rowType&&"GROSS_MARGIN"===t.column.dataField&&(t.cellElement.style.color=t.data.GROSS_MARGIN_RATE<30?"red":"blue"),"data"===t.rowType&&"NET_MARGIN"===t.column.dataField&&(t.cellElement.style.color=t.data.NET_MARGIN_RATE<30?"red":"blue"),"data"===t.rowType&&"PRICE_SALE"===t.column.dataField){var e=t.data.PRICE_SALE/(t.data.VAT/100+1),i=e-t.data.CUSTOMER_PRICE,a=(e-t.data.CUSTOMER_PRICE)/e*100;t.data.GROSS_MARGIN=i.toFixed(2)+"€ / %"+a.toFixed(2),t.data.GROSS_MARGIN_RATE=a.toFixed(2),t.values[6]=i.toFixed(2)+"€/ %"+a.toFixed(2);var n=t.data.PRICE_SALE/(t.data.VAT/100+1),r=(n-t.data.CUSTOMER_PRICE)/1.12,s=(n-t.data.CUSTOMER_PRICE)/1.12/n*100;t.data.NET_MARGIN=r.toFixed(2)+"€ / %"+s.toFixed(2),t.data.NET_MARGIN_RATE=s.toFixed(2),t.values[7]=r.toFixed(2)+"€  %"+s.toFixed(2)}}},p.createElement(b.Po,{defaultPageSize:14}),p.createElement(b.uE,{visible:!0,allowedPageSizes:[5,10,50],showPageSizeSelector:!0}),p.createElement(b.LO,{mode:"batch",allowUpdating:!0,allowDeleting:!1,confirmDelete:!1}),p.createElement(b.sg,{dataField:"CODE",caption:this.t("grdItemList.clmCode"),visible:!0,width:100,allowEditing:!1}),p.createElement(b.sg,{dataField:"NAME",caption:this.t("grdItemList.clmName"),visible:!0,width:250,defaultSortOrder:"asc"}),p.createElement(b.sg,{dataField:"BARCODE",caption:this.t("grdItemList.clmBarcode"),visible:!0,width:150,allowEditing:!1}),p.createElement(b.sg,{dataField:"MULTICODE",caption:this.t("grdItemList.clmMulticode"),visible:!0,width:150}),p.createElement(b.sg,{dataField:"CUSTOMER_NAME",caption:this.t("grdItemList.clmCustomerName"),visible:!0,allowEditing:!1}),p.createElement(b.sg,{dataField:"CUSTOMER_PRICE",caption:this.t("grdItemList.clmCustomerPrice"),visible:!0,width:100}),p.createElement(b.sg,{dataField:"MAIN_UNIT_NAME",caption:this.t("grdItemList.clmMainUnit"),visible:!1,width:100,allowEditing:!1}),p.createElement(b.sg,{dataField:"PRICE_SALE",caption:this.t("grdItemList.clmPriceSale"),visible:!0,width:80}),p.createElement(b.sg,{dataField:"GROSS_MARGIN",caption:this.t("grdItemList.clmGrossMargin"),visible:!0,width:130,allowEditing:!1}),p.createElement(b.sg,{dataField:"NET_MARGIN",caption:this.t("grdItemList.clmNetMargin"),visible:!0,width:130,allowEditing:!1}),p.createElement(b.sg,{dataField:"UNDER_UNIT_NAME",caption:this.t("grdItemList.clmUnderUnit"),visible:!0,width:80,allowEditing:!1}),p.createElement(b.sg,{dataField:"UNDER_FACTOR",caption:this.t("grdItemList.clmUnderFactor"),visible:!0,width:80}),p.createElement(b.sg,{dataField:"VAT",caption:this.t("grdItemList.clmVat"),visible:!0,width:100,editCellRender:this._cellRoleRender}),p.createElement(b.sg,{dataField:"ORGINS",caption:this.t("grdItemList.clmOrgins"),visible:!0,width:120,editCellRender:this._cellRoleRender}),p.createElement(b.sg,{dataField:"WEIGHING",caption:this.t("grdItemList.clmWeighing"),visible:!0,width:100}),p.createElement(b.sg,{dataField:"STATUS",caption:this.t("grdItemList.clmStatus"),visible:!0,width:100}))))))}}]),T}(p.PureComponent)}}]);