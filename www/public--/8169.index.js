"use strict";(self.webpackChunkwww=self.webpackChunkwww||[]).push([[8169],{90428:(t,e,n)=>{n.d(e,{ZP:()=>p});var a=n(15671),i=n(43144),r=n(97326),s=n(60136),o=n(82963),c=n(61120),l=n(67294),d=n(14140),u=n.n(d),m=n(20819),E=n(30381),h=n.n(E);var p=function(t){(0,s.Z)(m,t);var e,n,d=(e=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.Z)(e);if(n){var i=(0,c.Z)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,o.Z)(this,t)});function m(t){var e;return(0,a.Z)(this,m),(e=d.call(this,t)).state.value=void 0===t.param?new Date(0):new Date(t.param.getValue().toString()),e.state.title=void 0===t.title?"":t.title,e.state.titleAlign=void 0===t.titleAlign?"left":t.titleAlign,e.state.showClearButton=void 0!==t.showClearButton&&t.showClearButton,e.state.pickerType=void 0===t.pickerType?"calendar":t.pickerType,e.state.type=void 0===t.type?"date":t.type,e.state.editorOptions=void 0===t.editorOptions?void 0:t.editorOptions,e._onValueChanged=e._onValueChanged.bind((0,r.Z)(e)),e._onEnterKey=e._onEnterKey.bind((0,r.Z)(e)),e}return(0,i.Z)(m,[{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged()}},{key:"_onEnterKey",value:function(){void 0!==this.props.onEnterKey&&this.props.onEnterKey()}},{key:"_dateView",value:function(){return l.createElement(u(),{id:this.props.id,showClearButton:this.state.showClearButton,pickerType:this.state.pickerType,height:"fit-content",valueChangeEvent:"keyup",value:"1970-01-01"==h()(this.state.value).format("YYYY-MM-DD")?null:h()(this.state.value),disabled:this.state.editable,type:this.state.type,dateSerializationFormat:"yyyy-MM-dd HH:mm",editorOptions:this.state.editorOptions,onEnterKey:this._onEnterKey,onValueChanged:this._onValueChanged},this.props.children,this.validationView())}},{key:"value",get:function(){return null==this.state.value?new Date(0):this.state.value},set:function(t){var e=this;if(void 0!==t&&null!=t||(t="1970-01-01"),void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t;else{var n=this.props.dt.data.where(this.props.dt.filter);n.length>0&&(void 0!==this.props.dt.row&&void 0!==n.find((function(t){return t===e.props.dt.row}))?n.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:n[n.length-1][this.props.dt.field]=t)}this.setState({value:t})}},{key:"render",value:function(){return 0==this.state.visible?l.createElement("div",null):void 0!==this.props.simple&&this.props.simple?this._dateView():void 0===this.state.title?l.createElement("div",{className:"dx-field"},this._dateView()):void 0===this.state.titleAlign?l.createElement("div",{className:"dx-field"},l.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._dateView()):"top"==this.state.titleAlign?l.createElement("div",{className:"dx-field"},l.createElement("div",null,this.state.title),this._dateView()):"bottom"==this.state.titleAlign?l.createElement("div",{className:"dx-field"},this._dateView(),l.createElement("div",null,this.state.option.title)):"left"==this.state.titleAlign?l.createElement("div",{className:"dx-field"},l.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._dateView()):"right"==this.state.titleAlign?l.createElement("div",{className:"dx-field"},this._dateView(),l.createElement("div",{className:"dx-field-label",style:{float:"right",paddingLeft:"15px"}},this.state.title)):void 0}}]),m}(m.ZP)},5083:(t,e,n)=>{n.d(e,{ZP:()=>m});var a=n(15671),i=n(43144),r=n(97326),s=n(60136),o=n(82963),c=n(61120),l=n(67294),d=n(67497),u=n(20819);n(17276);var m=function(t){(0,s.Z)(m,t);var e,n,u=(e=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.Z)(e);if(n){var i=(0,c.Z)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,o.Z)(this,t)});function m(t){var e;return(0,a.Z)(this,m),(e=u.call(this,t)).dev=null,e.state.value=void 0!==t.value?t.value:0,e.state.title=void 0===t.title?"":t.title,e.state.titleAlign=void 0===t.titleAlign?"left":t.titleAlign,e.state.showClearButton=void 0!==t.showClearButton&&t.showClearButton,e.state.readOnly=void 0!==t.readOnly&&t.readOnly,e._onInitialized=e._onInitialized.bind((0,r.Z)(e)),e._onValueChanged=e._onValueChanged.bind((0,r.Z)(e)),e._onEnterKey=e._onEnterKey.bind((0,r.Z)(e)),e._onFocusIn=e._onFocusIn.bind((0,r.Z)(e)),e._onFocusOut=e._onFocusOut.bind((0,r.Z)(e)),e._onChange=e._onChange.bind((0,r.Z)(e)),e}return(0,i.Z)(m,[{key:"_onInitialized",value:function(t){this.dev=t.component}},{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(t)}},{key:"_onEnterKey",value:function(){void 0!==this.props.onEnterKey&&this.props.onEnterKey()}},{key:"_onFocusIn",value:function(t){void 0!==this.props.selectAll&&1!=this.props.selectAll||this.dev.element().getElementsByTagName("input")[1].select(),void 0!==this.props.onFocusIn&&this.props.onFocusIn(t)}},{key:"_onFocusOut",value:function(){void 0!==this.props.onFocusOut&&this.props.onFocusOut()}},{key:"_onChange",value:function(){void 0!==this.props.onChange&&this.props.onChange()}},{key:"_txtView",value:function(){return l.createElement(d.NumberBox,{showClearButton:this.state.showClearButton,height:"fit-content",elementAttr:this.props.elementAttr,style:this.props.style,valueChangeEvent:"keyup",onValueChanged:this._onValueChanged,onEnterKey:this._onEnterKey,onFocusIn:this._onFocusIn,onFocusOut:this._onFocusOut,onChange:this._onChange,value:this.state.value,readOnly:this.state.readOnly,onInitialized:this._onInitialized,disabled:void 0===this.props.editable?this.state.editable:this.props.editable,showSpinButtons:this.props.showSpinButtons,step:this.props.step,format:this.props.format},this.props.children,this.validationView())}},{key:"value",get:function(){return this.state.value},set:function(t){var e=this;if(void 0!==t){if(void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t;else{var n=this.props.dt.data.where(this.props.dt.filter);n.length>0&&(void 0!==this.props.dt.row&&void 0!==n.find((function(t){return t===e.props.dt.row}))?n.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t:n[n.length-1][this.props.dt.field]=t)}this.setState({value:t})}}},{key:"readOnly",get:function(){return this.state.readOnly},set:function(t){this.setState({readOnly:t})}},{key:"focus",value:function(){this.dev.focus()}},{key:"render",value:function(){return 0==this.state.visible?l.createElement("div",null):void 0!==this.props.simple&&this.props.simple?this._txtView():""==this.state.title?l.createElement("div",{className:"dx-field"},this._txtView()):void 0===this.state.titleAlign?l.createElement("div",{className:"dx-field"},l.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._txtView()):"top"==this.state.titleAlign?l.createElement("div",{className:"dx-field"},l.createElement("div",null,this.state.title),this._txtView()):"bottom"==this.state.titleAlign?l.createElement("div",{className:"dx-field"},this._txtView(),l.createElement("div",null,this.state.option.title)):"left"==this.state.titleAlign?l.createElement("div",{className:"dx-field"},l.createElement("div",{className:"dx-field-label",style:{textAlign:"right"}},this.state.title),this._txtView()):"right"==this.state.titleAlign?l.createElement("div",{className:"dx-field"},this._txtView(),l.createElement("div",{className:"dx-field-label",style:{float:"right",paddingLeft:"15px"}},this.state.title)):void 0}}]),m}(u.ZP)},51559:(t,e,n)=>{n.d(e,{ZP:()=>p});var a=n(15861),i=n(15671),r=n(43144),s=n(97326),o=n(60136),c=n(82963),l=n(61120),d=n(64687),u=n.n(d),m=n(67294),E=n(11694),h=n.n(E);var p=function(t){(0,o.Z)(p,t);var e,n,d,E=(n=p,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,l.Z)(n);if(d){var a=(0,l.Z)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,c.Z)(this,t)});function p(t){var e;return(0,i.Z)(this,p),(e=E.call(this,t)).dev=null,e.state.value=void 0!==t.value?t.value:"",e.state.placeholder=void 0===t.placeholder?"":t.placeholder,e._onInitialized=e._onInitialized.bind((0,s.Z)(e)),e._onValueChanged=e._onValueChanged.bind((0,s.Z)(e)),e}return(0,r.Z)(p,[{key:"_onInitialized",value:function(t){this.dev=t.component}},{key:"_TagBoxView",value:function(){return m.createElement(h(),{id:this.props.id,items:[],acceptCustomValue:!0,onValueChanged:this._onValueChanged,placeholder:this.state.placeholder,openOnFieldClick:!1,showClearButton:!0,maxFilterQueryLength:1e4,noDataText:""},this.props.children,this.validationView())}},{key:"_onValueChanged",value:function(t){this.value=t.value,void 0!==this.props.onValueChanged&&this.props.onValueChanged(t)}},{key:"value",get:function(){return this.state.value},set:function(t){var e=this;if(void 0!==t){if(void 0!==this.props.dt&&void 0!==this.props.dt.data&&this.props.dt.data.length>0&&void 0!==this.props.dt.field)if(void 0===this.props.dt.filter)void 0!==this.props.dt.row&&void 0!==this.props.dt.data.find((function(t){return t===e.props.dt.row}))?(this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t,void 0!==this.props.dt.display&&(this.props.dt.data.find((function(t){return t===e.props.dt.row}))[this.props.dt.display]=this.displayValue)):(this.props.dt.data[this.props.dt.data.length-1][this.props.dt.field]=t,void 0!==this.props.dt.display&&(this.props.dt.data[this.props.dt.data.length-1][this.props.dt.display]=this.displayValue));else{var n=this.props.dt.data.where(this.props.dt.filter);n.length>0&&(void 0!==this.props.dt.row&&void 0!==n.find((function(t){return t===e.props.dt.row}))?(n.find((function(t){return t===e.props.dt.row}))[this.props.dt.field]=t,void 0!==this.props.dt.display&&(n.find((function(t){return t===e.props.dt.row}))[this.props.dt.display]=this.displayValue)):(n[n.length-1][this.props.dt.field]=t,void 0!==this.props.dt.display&&(n[n.length-1][this.props.dt.display]=this.displayValue)))}this.setState({value:null==t?"":t})}}},{key:"displayValue",get:function(){return this.dev.option("displayValue")}},{key:"componentDidMount",value:(e=(0,a.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.state.data){t.next=3;break}return t.next=3,this.dataRefresh(this.state.data);case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){return void 0!==this.props.simple&&this.props.simple?this._TagBoxView():m.createElement("div",{className:"dx-field"},m.createElement("div",{className:"dx-field-label"},void 0===this.props.title?"":this.props.title),m.createElement("div",{className:"dx-field-value"},this._TagBoxView()))}}]),p}(n(20819).ZP)},58169:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Q});var a=n(71002),r=n(4942),s=n(15861),o=n(15671),c=n(43144),l=n(97326),d=n(60136),u=n(82963),m=n(61120),E=n(64687),h=n.n(E),p=n(30381),O=n.n(p),T=n(67294),I=n(73364),b=n(4598),f=n(42866),g=n.n(f),C=n(53221),D=n.n(C),x=n(25552),v=n.n(x),_=n(65580),w=n.n(_),P=n(91686),R=n.n(P),y=n(30886),U=(n(130),n(84105)),N=n(17276),A=n(99846),S=n(5083),M=n(99077),j=n(55585),k=n(417),F=n(32175),L=n(18405),V=n(73682),Z=n(90428),G=n(51559),B=n(60547),Y=(n(51166),n(19755),n(28996));function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Q=function(t){(0,d.Z)(rt,t);var e,n,r,E,p,f,C,_,P,W,Q,q,z,K,X,J,$,tt,et,nt,at,it=(nt=rt,at=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,m.Z)(nt);if(at){var n=(0,m.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,u.Z)(this,t)});function rt(t){var e;return(0,o.Z)(this,rt),(e=it.call(this,t)).core=I.Z.instance.core,e.prmObj=e.param.filter({TYPE:1,USERS:e.user.CODE}),e.acsobj=e.access.filter({TYPE:1,USERS:e.user.CODE}),e.docObj=new b.Ch,e.paymentObj=new b.Ch,e.tabIndex=t.data.tabkey,e._cellRoleRender=e._cellRoleRender.bind((0,l.Z)(e)),e._calculateTotal=e._calculateTotal.bind((0,l.Z)(e)),e._getItems=e._getItems.bind((0,l.Z)(e)),e._getDispatch=e._getDispatch.bind((0,l.Z)(e)),e._addPayment=e._addPayment.bind((0,l.Z)(e)),e._getBarcodes=e._getBarcodes.bind((0,l.Z)(e)),e._onItemRendered=e._onItemRendered.bind((0,l.Z)(e)),e.frmDocItems=void 0,e.docLocked=!1,e.customerControl=!0,e.customerClear=!1,e.combineControl=!0,e.combineNew=!1,e.rightItems=[{text:e.t("getDispatch")},{text:e.t("getOrders")},{text:e.t("getPayment")}],e.multiItemData=new N.$A,e.unitDetailData=new N.$A,e.newPrice=new N.$A,e.newVat=new N.$A,e}return(0,c.Z)(rt,[{key:"componentDidMount",value:(et=(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.util.waitUntil(0);case 2:this.init(),void 0!==this.pagePrm&&this.getDoc(this.pagePrm.GUID,"",0);case 4:case"end":return t.stop()}}),t,this)}))),function(){return et.apply(this,arguments)})},{key:"init",value:(tt=(0,s.Z)(h().mark((function t(){var e,n,a=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.docObj.clearAll(),this.paymentObj.clearAll(),this.newPrice.clear(),this.newVat.clear(),this.docObj.ds.on("onAddRow",(function(t,e){"new"==e.stat&&(a.btnNew.setState({disabled:!1}),a.btnBack.setState({disabled:!1}),a.btnNew.setState({disabled:!1}),a.btnBack.setState({disabled:!0}),a.btnSave.setState({disabled:!1}),a.btnDelete.setState({disabled:!1}),a.btnPrint.setState({disabled:!1}))})),this.docObj.ds.on("onEdit",(function(t,e){"edit"==e.rowData.stat&&(a.btnBack.setState({disabled:!1}),a.btnNew.setState({disabled:!0}),a.btnSave.setState({disabled:!1}),a.btnDelete.setState({disabled:!1}),a.btnPrint.setState({disabled:!1}),e.rowData.CUSER=a.user.CODE)})),this.docObj.ds.on("onRefresh",(function(t){a.btnBack.setState({disabled:!0}),a.btnNew.setState({disabled:!1}),a.btnSave.setState({disabled:!0}),a.btnDelete.setState({disabled:!1}),a.btnPrint.setState({disabled:!1})})),this.docObj.ds.on("onDelete",(function(t){a.btnBack.setState({disabled:!1}),a.btnNew.setState({disabled:!1}),a.btnSave.setState({disabled:!1}),a.btnDelete.setState({disabled:!1}),a.btnPrint.setState({disabled:!1})})),this.dtDocDate.value=O()(new Date),this.dtShipDate.value=O()(new Date),(e=H({},this.docObj.empty)).TYPE=0,e.DOC_TYPE=20,this.docObj.addEmpty(e),(n=H({},this.docObj.docCustomer.empty)).DOC_GUID=this.docObj.dt()[0].GUID,n.TYPE=this.docObj.dt()[0].TYPE,n.DOC_TYPE=this.docObj.dt()[0].DOC_TYPE,n.REBATE=this.docObj.dt()[0].REBATE,n.DOC_DATE=this.docObj.dt()[0].DOC_DATE,this.docObj.docCustomer.addEmpty(n),this.txtRef.readOnly=!1,this.txtRefno.readOnly=!1,this.docLocked=!1,this.frmDocItems.option("disabled",!0),t.next=27,this.grdPurcInv.dataRefresh({source:this.docObj.docItems.dt("DOC_ITEMS")});case 27:return t.next=29,this.grdInvoicePayment.dataRefresh({source:this.paymentObj.docCustomer.dt()});case 29:return t.next=31,this.grdMultiItem.dataRefresh({source:this.multiItemData});case 31:return t.next=33,this.grdUnit2.dataRefresh({source:this.unitDetailData});case 33:return t.next=35,this.grdNewPrice.dataRefresh({source:this.newPrice});case 35:return t.next=37,this.grdNewVat.dataRefresh({source:this.newVat});case 37:this.txtDiffrentPositive.value=0,this.txtDiffrentNegative.value=0,this.txtDiffrentTotal.value=0,this.txtDiffrentInv.value=0;case 41:case"end":return t.stop()}}),t,this)}))),function(){return tt.apply(this,arguments)})},{key:"getDoc",value:($=(0,s.Z)(h().mark((function t(e,n,a){var i,r,s,o=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.docObj.clearAll(),this.paymentObj.clearAll(),I.Z.instance.setState({isExecute:!0}),t.next=5,this.docObj.load({GUID:e,REF:n,REF_NO:a,TYPE:0,DOC_TYPE:20});case 5:if(I.Z.instance.setState({isExecute:!1}),this.txtRef.readOnly=!0,this.txtRefno.readOnly=!0,0==this.docObj.dt()[0].LOCKED){t.next=16;break}return this.docLocked=!0,i={id:"msgGetLocked",showTitle:!0,title:this.t("msgGetLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgGetLocked.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgGetLocked.msg"))},t.next=13,(0,B.W)(i);case 13:this.frmDocItems.option("disabled",!0),t.next=18;break;case 16:this.docLocked=!1,this.frmDocItems.option("disabled",!1);case 18:return r={query:"SELECT ISNULL(ROUND(SUM(AMOUNT),2),0) AS TOTAL FROM DOC_ITEMS_VW_01 WHERE INVOICE_GUID IN (SELECT  GUID FROM DOC_ITEMS_VW_01 AS DITEM WHERE ((DITEM.DOC_GUID = @INVOICE_GUID) OR(DITEM.INVOICE_GUID = @INVOICE_GUID)) AND DOC_TYPE <> 21) AND DOC_TYPE=21 ",param:["INVOICE_GUID:string|50"],value:[this.docObj.dt()[0].GUID]},t.next=21,this.core.sql.execute(r);case 21:(s=t.sent).result.recordset.length>0?this.txtDiffrentInv.value="-"+s.result.recordset[0].TOTAL:this.txtDiffrentInv.value=0,this._getItems(),this._getBarcodes(),setTimeout((function(){o._calculateTotal()}),1e3),this._getPayment(this.docObj.dt()[0].GUID);case 27:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return $.apply(this,arguments)})},{key:"checkDoc",value:(J=(0,s.Z)(h().mark((function t(e,n,a){var i=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=(0,s.Z)(h().mark((function t(r){var s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===n){t.next=15;break}return t.next=3,(new b.Ch).load({GUID:e,REF:n,REF_NO:a});case 3:if(!(t.sent.length>0)){t.next=12;break}return s={id:"msgCode",showTitle:!0,title:"Dikkat",showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:"EvraÄŸa Git",location:"before"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},"Evrak Bulundu")},t.next=8,(0,B.W)(s);case 8:"btn01"==t.sent?(i.getDoc(e,n,a),r(2)):r(3),t.next=13;break;case 12:r(1);case 13:t.next=16;break;case 15:r(0);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t,e,n){return J.apply(this,arguments)})},{key:"_calculateTotal",value:(X=(0,s.Z)(h().mark((function t(){var e,n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.docObj.dt()[0].AMOUNT=this.docObj.docItems.dt().sum("AMOUNT",2),this.docObj.dt()[0].DISCOUNT=this.docObj.docItems.dt().sum("DISCOUNT",2),this.docObj.dt()[0].VAT=this.docObj.docItems.dt().sum("VAT",2),this.docObj.dt()[0].TOTAL=this.docObj.docItems.dt().sum("TOTAL",2),this.docObj.docCustomer.dt()[0].AMOUNT=this.docObj.dt()[0].TOTAL,e=0,n=0,a=0;a<this.docObj.docItems.dt().length;a++)this.docObj.docItems.dt()[a].DIFF_PRICE>0&&0==this.docObj.docItems.dt()[a].ITEM_TYPE&&(e+=this.docObj.docItems.dt()[a].DIFF_PRICE*this.docObj.docItems.dt()[a].QUANTITY),this.docObj.docItems.dt()[a].DIFF_PRICE<0&&0==this.docObj.docItems.dt()[a].ITEM_TYPE&&(n+=this.docObj.docItems.dt()[a].DIFF_PRICE*this.docObj.docItems.dt()[a].QUANTITY);console.log(e),this.txtDiffrentPositive.value=parseFloat(e).toFixed(2),this.txtDiffrentNegative.value=parseFloat(n).toFixed(2),this.txtDiffrentTotal.value=(parseFloat(n)+parseFloat(e)).toFixed(2);case 12:case"end":return t.stop()}}),t,this)}))),function(){return X.apply(this,arguments)})},{key:"_cellRoleRender",value:function(t){var e=this;if("ITEM_CODE"==t.column.dataField)return T.createElement(A.ZP,{id:"txtGrdItemsCode"+t.rowIndex,parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,value:t.value,onKeyDown:function(){var n=(0,s.Z)(h().mark((function n(a){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("F10"!=a.event.key&&"ArrowRight"!=a.event.key){n.next=4;break}return n.next=3,e.pg_txtItemsCode.setVal(t.value);case 3:e.pg_txtItemsCode.onClick=function(){var n=(0,s.Z)(h().mark((function n(a){var i,r;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.customerControl=!0,e.customerClear=!1,e.combineControl=!0,e.combineNew=!1,1!=a.length){n.next=9;break}return n.next=7,e.addItem(a[0],t.rowIndex);case 7:n.next=39;break;case 9:if(!(a.length>1)){n.next=39;break}i=0;case 11:if(!(i<a.length)){n.next=39;break}if(0!=i){n.next=17;break}return n.next=15,e.addItem(a[i],t.rowIndex);case 15:n.next=36;break;case 17:return(r=H({},e.docObj.docItems.empty)).DOC_GUID=e.docObj.dt()[0].GUID,r.TYPE=e.docObj.dt()[0].TYPE,r.DOC_TYPE=e.docObj.dt()[0].DOC_TYPE,r.REBATE=e.docObj.dt()[0].REBATE,r.LINE_NO=e.docObj.docItems.dt().length,r.REF=e.docObj.dt()[0].REF,r.REF_NO=e.docObj.dt()[0].REF_NO,r.OUTPUT=e.docObj.dt()[0].OUTPUT,r.INPUT=e.docObj.dt()[0].INPUT,r.DOC_DATE=e.docObj.dt()[0].DOC_DATE,r.SHIPMENT_DATE=e.docObj.dt()[0].SHIPMENT_DATE,e.txtRef.readOnly=!0,e.txtRefno.readOnly=!0,e.docObj.docItems.addEmpty(r),n.next=34,e.core.util.waitUntil(100);case 34:return n.next=36,e.addItem(a[i],e.docObj.docItems.dt().length-1);case 36:i++,n.next=11;break;case 39:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),onValueChanged:function(e){t.value=e.value},onChange:function(){var n=(0,s.Z)(h().mark((function n(a){var i,r,s;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==a.event.isTrusted){n.next=17;break}return i={query:"SELECT ITEMS_VW_01.GUID,CODE,NAME,VAT,COST_PRICE FROM ITEMS_VW_01 INNER JOIN ITEM_BARCODE_VW_01 ON ITEMS_VW_01.GUID = ITEM_BARCODE_VW_01.ITEM_GUID WHERE CODE = @CODE OR ITEM_BARCODE_VW_01.BARCODE = @CODE",param:["CODE:string|50"],value:[a.component._changedValue]},n.next=4,e.core.sql.execute(i);case 4:if(!((r=n.sent).result.recordset.length>0)){n.next=14;break}return e.customerControl=!0,e.customerClear=!1,e.combineControl=!0,e.combineNew=!1,n.next=12,e.addItem(r.result.recordset[0],t.rowIndex);case 12:n.next=17;break;case 14:return s={id:"msgItemNotFound",showTitle:!0,title:e.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:e.t("msgItemNotFound.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},e.t("msgItemNotFound.msg"))},n.next=17,(0,B.W)(s);case 17:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}().bind(this),button:[{id:"01",icon:"more",onClick:function(){e.pg_txtItemsCode.show(),e.pg_txtItemsCode.onClick=function(){var n=(0,s.Z)(h().mark((function n(a){var i,r;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.customerControl=!0,e.customerClear=!1,e.combineControl=!0,e.combineNew=!1,1!=a.length){n.next=9;break}return n.next=7,e.addItem(a[0],t.rowIndex);case 7:n.next=39;break;case 9:if(!(a.length>1)){n.next=39;break}i=0;case 11:if(!(i<a.length)){n.next=39;break}if(0!=i){n.next=17;break}return n.next=15,e.addItem(a[i],t.rowIndex);case 15:n.next=36;break;case 17:return(r=H({},e.docObj.docItems.empty)).DOC_GUID=e.docObj.dt()[0].GUID,r.TYPE=e.docObj.dt()[0].TYPE,r.DOC_TYPE=e.docObj.dt()[0].DOC_TYPE,r.REBATE=e.docObj.dt()[0].REBATE,r.LINE_NO=e.docObj.docItems.dt().length,r.REF=e.docObj.dt()[0].REF,r.REF_NO=e.docObj.dt()[0].REF_NO,r.OUTPUT=e.docObj.dt()[0].OUTPUT,r.INPUT=e.docObj.dt()[0].INPUT,r.DOC_DATE=e.docObj.dt()[0].DOC_DATE,r.SHIPMENT_DATE=e.docObj.dt()[0].SHIPMENT_DATE,e.txtRef.readOnly=!0,e.txtRefno.readOnly=!0,e.docObj.docItems.addEmpty(r),n.next=34,e.core.util.waitUntil(100);case 34:return n.next=36,e.addItem(a[i],e.docObj.docItems.dt().length-1);case 36:i++,n.next=11;break;case 39:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}}]})}},{key:"_onItemRendered",value:(K=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.util.waitUntil(10);case 2:e.itemData.title==this.t("tabTitleSubtotal")||(e.itemData.title==this.t("tabTitlePayments")?this._getPayment(this.docObj.dt()[0].GUID):(e.itemData.title,this.t("tabTitleOldInvoices")));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return K.apply(this,arguments)})},{key:"addItem",value:(z=(0,s.Z)(h().mark((function t(e,n,r,o,c,l,d){var u,m,E,p,O,T,b,f=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(I.Z.instance.setState({isExecute:!0}),void 0===e.ITEM_TYPE&&(e.ITEM_TYPE=0),void 0===r&&(r=1),0!=e.ITEM_TYPE){t.next=32;break}if(1!=this.customerControl){t.next=20;break}return u={query:"SELECT MULTICODE,(SELECT [dbo].[FN_CUSTOMER_PRICE](ITEM_GUID,CUSTOMER_GUID,@QUANTITY,GETDATE())) AS PRICE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_CODE = @ITEM_CODE AND CUSTOMER_GUID = @CUSTOMER_GUID",param:["ITEM_CODE:string|50","CUSTOMER_GUID:string|50","QUANTITY:float"],value:[e.CODE,this.docObj.dt()[0].OUTPUT,r]},t.next=8,this.core.sql.execute(u);case 8:if(0!=t.sent.result.recordset.length){t.next=20;break}if(m="",1!=this.customerClear){t.next=15;break}return t.next=14,this.grdPurcInv.devGrid.deleteRow(n);case 14:return t.abrupt("return");case 15:return I.Z.instance.setState({isExecute:!1}),t.next=18,this.msgCustomerNotFound.show().then(function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("btn01"!=e||1!=f.checkCustomer.value){t.next=3;break}return f.customerControl=!1,t.abrupt("return");case 3:if("btn02"!=e){t.next=9;break}return m=e,t.next=7,f.grdPurcInv.devGrid.deleteRow(n);case 7:return 1==f.checkCustomer.value&&(f.customerClear=!0),t.abrupt("return");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 18:if("btn02"!=m){t.next=20;break}return t.abrupt("return");case 20:E=h().mark((function t(a){var i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f.docObj.docItems.dt()[a].ITEM_CODE!=e.CODE){t.next=19;break}if(1!=f.combineControl){t.next=10;break}return i="",I.Z.instance.setState({isExecute:!1}),t.next=6,f.msgCombineItem.show().then(function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("btn01"!=e){t.next=11;break}return f.docObj.docItems.dt()[a].QUANTITY=f.docObj.docItems.dt()[a].QUANTITY+r,f.docObj.docItems.dt()[a].VAT=parseFloat((f.docObj.docItems.dt()[a].VAT+f.docObj.docItems.dt()[a].PRICE*(f.docObj.docItems.dt()[a].VAT_RATE/100)*r).toFixed(3)),f.docObj.docItems.dt()[a].AMOUNT=parseFloat((f.docObj.docItems.dt()[a].QUANTITY*f.docObj.docItems.dt()[a].PRICE).toFixed(3)),f.docObj.docItems.dt()[a].TOTAL=parseFloat((f.docObj.docItems.dt()[a].QUANTITY*f.docObj.docItems.dt()[a].PRICE-f.docObj.docItems.dt()[a].DISCOUNT+f.docObj.docItems.dt()[a].VAT).toFixed(3)),f._calculateTotal(),t.next=8,f.grdPurcInv.devGrid.deleteRow(n);case 8:return 1==f.checkCombine.value&&(f.combineControl=!1),i=e,t.abrupt("return");case 11:if("btn02"!=e){t.next=14;break}return 1==f.checkCombine.value&&(f.combineControl=!1,f.combineNew=!0),t.abrupt("return");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:if("btn01"!=i){t.next=8;break}return t.abrupt("return",{v:void 0});case 8:t.next=19;break;case 10:if(0!=f.combineNew){t.next=19;break}return f.docObj.docItems.dt()[a].QUANTITY=f.docObj.docItems.dt()[a].QUANTITY+r,f.docObj.docItems.dt()[a].VAT=parseFloat((f.docObj.docItems.dt()[a].VAT+f.docObj.docItems.dt()[a].PRICE*(f.docObj.docItems.dt()[a].VAT_RATE/100)*r).toFixed(3)),f.docObj.docItems.dt()[a].AMOUNT=parseFloat((f.docObj.docItems.dt()[a].QUANTITY*f.docObj.docItems.dt()[a].PRICE).toFixed(3)),f.docObj.docItems.dt()[a].TOTAL=parseFloat((f.docObj.docItems.dt()[a].QUANTITY*f.docObj.docItems.dt()[a].PRICE-f.docObj.docItems.dt()[a].DISCOUNT+f.docObj.docItems.dt()[a].VAT).toFixed(3)),f._calculateTotal(),t.next=18,f.grdPurcInv.devGrid.deleteRow(n);case 18:return t.abrupt("return",{v:void 0});case 19:case"end":return t.stop()}}),t)})),p=0;case 22:if(!(p<this.docObj.docItems.dt().length)){t.next=30;break}return t.delegateYield(E(p),"t0",24);case 24:if(O=t.t0,"object"!==(0,a.Z)(O)){t.next=27;break}return t.abrupt("return",O.v);case 27:p++,t.next=22;break;case 30:t.next=34;break;case 32:if(this.docObj.docItems.dt()[i].ITEM_CODE!=e.CODE){t.next=34;break}return t.abrupt("return");case 34:return this.docObj.docItems.dt()[n].ITEM_CODE=e.CODE,this.docObj.docItems.dt()[n].ITEM=e.GUID,this.docObj.docItems.dt()[n].ITEM_TYPE=e.ITEM_TYPE,void 0===d?(this.docObj.docItems.dt()[n].VAT_RATE=e.VAT,this.docObj.docItems.dt()[n].OLD_VAT=e.VAT):(this.docObj.docItems.dt()[n].VAT_RATE=d,this.docObj.docItems.dt()[n].OLD_VAT=e.VAT),this.docObj.docItems.dt()[n].ITEM_NAME=e.NAME,this.docObj.docItems.dt()[n].QUANTITY=r,T={query:"SELECT (SELECT [dbo].[FN_CUSTOMER_PRICE](ITEM_GUID,CUSTOMER_GUID,@QUANTITY,GETDATE())) AS PRICE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_CODE = @ITEM_CODE AND CUSTOMER_GUID = @CUSTOMER_GUID ORDER BY LDATE DESC",param:["ITEM_CODE:string|50","CUSTOMER_GUID:string|50","QUANTITY:float"],value:[e.CODE,this.docObj.dt()[0].OUTPUT,r]},t.next=43,this.core.sql.execute(T);case 43:b=t.sent,void 0===o?b.result.recordset.length>0?(this.docObj.docItems.dt()[n].PRICE=parseFloat(b.result.recordset[0].PRICE.toFixed(3)),this.docObj.docItems.dt()[n].VAT=parseFloat((b.result.recordset[0].PRICE*(this.docObj.docItems.dt()[n].VAT_RATE/100)*r).toFixed(3)),this.docObj.docItems.dt()[n].AMOUNT=parseFloat((b.result.recordset[0].PRICE*r).toFixed(3)),this.docObj.docItems.dt()[n].TOTAL=parseFloat((b.result.recordset[0].PRICE*r+this.docObj.docItems.dt()[n].VAT).toFixed(3)),this._calculateTotal()):(this.docObj.docItems.dt()[n].PRICE=0,this.docObj.docItems.dt()[n].VAT=0,this.docObj.docItems.dt()[n].AMOUNT=0,this.docObj.docItems.dt()[n].TOTAL=0,this._calculateTotal()):(this.docObj.docItems.dt()[n].PRICE=parseFloat(o.toFixed(3)),void 0!==l?(this.docObj.docItems.dt()[n].DISCOUNT=void 0===l?0:(this.docObj.docItems.dt()[n].PRICE*l/100*r).toFixed(2),this.docObj.docItems.dt()[n].DISCOUNT_RATE=void 0===l?0:l):(this.docObj.docItems.dt()[n].DISCOUNT=void 0===c?0:c,this.docObj.docItems.dt()[n].DISCOUNT_RATE=void 0===c?0:c/this.docObj.docItems.dt()[n].AMOUNT*100),this.docObj.docItems.dt()[n].VAT=parseFloat(((o*r-this.docObj.docItems.dt()[n].DISCOUNT)*(this.docObj.docItems.dt()[n].VAT_RATE/100)).toFixed(3)),this.docObj.docItems.dt()[n].AMOUNT=parseFloat((o*r).toFixed(3)),this.docObj.docItems.dt()[n].TOTAL=parseFloat((o*r-this.docObj.docItems.dt()[n].DISCOUNT+this.docObj.docItems.dt()[n].VAT).toFixed(3)),this._calculateTotal()),b.result.recordset.length>0&&(this.docObj.docItems.dt()[n].CUSTOMER_PRICE=b.result.recordset[0].PRICE,this.docObj.docItems.dt()[n].DIFF_PRICE=this.docObj.docItems.dt()[n].PRICE-this.docObj.docItems.dt()[n].CUSTOMER_PRICE),I.Z.instance.setState({isExecute:!1});case 47:case"end":return t.stop()}}),t,this)}))),function(t,e,n,a,i,r,s){return z.apply(this,arguments)})},{key:"_getItems",value:(q=(0,s.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e={source:{select:{query:"SELECT GUID,CODE,NAME,VAT,0 AS ITEM_TYPE,ISNULL((SELECT TOP 1 MULTICODE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS_VW_01.GUID AND CUSTOMER_GUID = '"+this.docObj.dt()[0].OUTPUT+"'),'') AS MULTICODE FROM ITEMS_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(NAME) LIKE UPPER(@VAL) ",param:["VAL:string|50"]},sql:this.core.sql}},this.pg_txtItemsCode.setSource(e);case 2:case"end":return t.stop()}}),t,this)}))),function(){return q.apply(this,arguments)})},{key:"_getDispatch",value:(Q=(0,s.Z)(h().mark((function t(){var e,n,a,i=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=this.docObj.dt()[0].OUTPUT&&"00000000-0000-0000-0000-000000000000"!=this.docObj.dt()[0].OUTPUT){t.next=7;break}return e={id:"msgCustomerSelect",showTitle:!0,title:this.t("msgCustomerSelect.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgCustomerSelect.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgCustomerSelect.msg"))},t.next=4,(0,B.W)(e);case 4:return t.abrupt("return");case 7:return n={query:"SELECT *,REF + '-' + CONVERT(VARCHAR,REF_NO) AS REFERANS FROM DOC_ITEMS_VW_01 WHERE OUTPUT = @OUTPUT AND INVOICE_GUID = '00000000-0000-0000-0000-000000000000' AND TYPE = 0 AND DOC_TYPE IN(40)",param:["OUTPUT:string|50"],value:[this.docObj.dt()[0].OUTPUT]},t.next=10,this.core.sql.execute(n);case 10:if(!((a=t.sent).result.recordset.length>0)){t.next=16;break}return t.next=14,this.pg_dispatchGrid.setData(a.result.recordset);case 14:t.next=18;break;case 16:return t.next=18,this.pg_dispatchGrid.setData([]);case 18:this.pg_dispatchGrid.show(),this.pg_dispatchGrid.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:I.Z.instance.setState({isExecute:!0}),n=0;case 2:if(!(n<e.length)){t.next=46;break}return(a=H({},i.docObj.docItems.empty)).GUID=e[n].GUID,a.DOC_GUID=e[n].DOC_GUID,a.TYPE=e[n].TYPE,a.DOC_TYPE=e[n].DOC_TYPE,a.REBATE=e[n].REBATE,a.LINE_NO=e[n].LINE_NO,a.REF=e[n].REF,a.REF_NO=e[n].REF_NO,a.DOC_DATE=e[n].DOC_DATE,a.SHIPMENT_DATE=e[n].SHIPMENT_DATE,a.INPUT=e[n].INPUT,a.INPUT_CODE=e[n].INPUT_CODE,a.INPUT_NAME=e[n].INPUT_NAME,a.OUTPUT=e[n].OUTPUT,a.OUTPUT_CODE=e[n].OUTPUT_CODE,a.OUTPUT_NAME=e[n].OUTPUT_NAME,a.ITEM=e[n].ITEM,a.ITEM_CODE=e[n].ITEM_CODE,a.ITEM_NAME=e[n].ITEM_NAME,a.PRICE=e[n].PRICE,a.QUANTITY=e[n].QUANTITY,a.VAT=e[n].VAT,a.AMOUNT=e[n].AMOUNT,a.TOTAL=e[n].TOTAL,a.DESCRIPTION=e[n].DESCRIPTION,a.INVOICE_GUID=i.docObj.dt()[0].GUID,a.VAT_RATE=e[n].VAT_RATE,a.DISCOUNT_RATE=e[n].DISCOUNT_RATE,a.CONNECT_REF=e[n].CONNECT_REF,a.ORDER_GUID=e[n].ORDER_GUID,a.OLD_VAT=e[n].VAT_RATE,a.VAT_RATE=e[n].VAT_RATE,a.DEPOT_QUANTITY=e[n].DEPOT_QUANTITY,a.CUSTOMER_PRICE=e[n].CUSTOMER_PRICE,t.next=40,i.docObj.docItems.addEmpty(a,!1);case 40:return t.next=42,i.core.util.waitUntil(100);case 42:i.docObj.docItems.dt()[i.docObj.docItems.dt().length-1].stat="edit";case 43:n++,t.next=2;break;case 46:i.docObj.docItems.dt().emit("onRefresh"),i._calculateTotal(),I.Z.instance.setState({isExecute:!1}),setTimeout((function(){i.btnSave.setState({disabled:!1})}),500);case 50:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case 20:case"end":return t.stop()}}),t,this)}))),function(){return Q.apply(this,arguments)})},{key:"_getOrders",value:(W=(0,s.Z)(h().mark((function t(){var e,n,a,i=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=this.docObj.dt()[0].OUTPUT&&"00000000-0000-0000-0000-000000000000"!=this.docObj.dt()[0].OUTPUT){t.next=7;break}return e={id:"msgCustomerSelect",showTitle:!0,title:this.t("msgCustomerSelect.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgCustomerSelect.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgCustomerSelect.msg"))},t.next=4,(0,B.W)(e);case 4:return t.abrupt("return");case 7:return n={query:"SELECT *,REF + '-' + CONVERT(VARCHAR,REF_NO) AS REFERANS FROM DOC_ORDERS_VW_01 WHERE OUTPUT = @OUTPUT AND SHIPMENT_GUID = '00000000-0000-0000-0000-000000000000' AND TYPE = 0 AND DOC_TYPE IN(60)",param:["OUTPUT:string|50"],value:[this.docObj.dt()[0].OUTPUT]},t.next=10,this.core.sql.execute(n);case 10:if(!((a=t.sent).result.recordset.length>0)){t.next=16;break}return t.next=14,this.pg_ordersGrid.setData(a.result.recordset);case 14:t.next=18;break;case 16:return t.next=18,this.pg_ordersGrid.setData([]);case 18:this.pg_ordersGrid.show(),this.pg_ordersGrid.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:I.Z.instance.setState({isExecute:!0}),n=0;case 2:if(!(n<e.length)){t.next=38;break}return(a=H({},i.docObj.docItems.empty)).DOC_GUID=i.docObj.dt()[0].GUID,a.TYPE=i.docObj.dt()[0].TYPE,a.DOC_TYPE=i.docObj.dt()[0].DOC_TYPE,a.LINE_NO=e[n].LINE_NO,a.REF=i.docObj.dt()[0].REF,a.REF_NO=i.docObj.dt()[0].REF_NO,a.DOC_DATE=i.docObj.dt()[0].DOC_DATE,a.INPUT=i.docObj.dt()[0].INPUT,a.INPUT_CODE=i.docObj.dt()[0].INPUT_CODE,a.INPUT_NAME=i.docObj.dt()[0].INPUT_NAME,a.OUTPUT=i.docObj.dt()[0].OUTPUT,a.OUTPUT_CODE=i.docObj.dt()[0].OUTPUT_CODE,a.OUTPUT_NAME=i.docObj.dt()[0].OUTPUT_NAME,a.ITEM=e[n].ITEM,a.ITEM_CODE=e[n].ITEM_CODE,a.ITEM_NAME=e[n].ITEM_NAME,a.PRICE=e[n].PRICE,a.QUANTITY=e[n].QUANTITY,a.VAT=e[n].VAT,a.AMOUNT=e[n].AMOUNT,a.TOTAL=e[n].TOTAL,a.DESCRIPTION=e[n].DESCRIPTION,a.VAT_RATE=e[n].VAT_RATE,a.DISCOUNT_RATE=e[n].DISCOUNT_RATE,a.ORDER_GUID=e[n].GUID,a.VAT_RATE=e[n].VAT_RATE,a.OLD_VAT=e[n].VAT_RATE,t.next=33,i.docObj.docItems.addEmpty(a);case 33:return t.next=35,i.core.util.waitUntil(100);case 35:n++,t.next=2;break;case 38:i._calculateTotal(),I.Z.instance.setState({isExecute:!1});case 40:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case 20:case"end":return t.stop()}}),t,this)}))),function(){return W.apply(this,arguments)})},{key:"_getPayment",value:(P=(0,s.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.paymentObj.load({PAYMENT_DOC_GUID:this.docObj.dt()[0].GUID});case 2:this.paymentObj.dt().length>0?(e=(this.docObj.dt()[0].TOTAL-this.paymentObj.dt()[0].TOTAL).toFixed(2),this.txtRemainder.setState({value:e}),this.txtMainRemainder.setState({value:e})):(this.txtRemainder.setState({value:this.docObj.dt()[0].TOTAL}),this.txtMainRemainder.setState({value:this.docObj.dt()[0].TOTAL}));case 3:case"end":return t.stop()}}),t,this)}))),function(){return P.apply(this,arguments)})},{key:"_addPayment",value:(_=(0,s.Z)(h().mark((function t(e,n){var a,i,r,s,o,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n>this.txtRemainder.value)){t.next=6;break}return a={id:"msgMoreAmount",showTitle:!0,title:this.t("msgMoreAmount.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgMoreAmount.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgMoreAmount.msg"))},t.next=4,(0,B.W)(a);case 4:return this.popPayment.show(),t.abrupt("return");case 6:if(0!=this.paymentObj.dt().length){t.next=18;break}return i=H({},this.paymentObj.empty),r={query:"SELECT ISNULL(MAX(REF_NO) + 1,1) AS REF_NO FROM DOC WHERE TYPE = 1 AND DOC_TYPE = 200 AND REF = @REF ",param:["REF:string|25"],value:[this.txtRef.value]},t.next=11,this.core.sql.execute(r);case 11:(s=t.sent).result.recordset.length>0&&(i.REF=this.txtRef.value,i.REF_NO=s.result.recordset[0].REF_NO),i.TYPE=1,i.DOC_TYPE=200,i.OUTPUT="00000000-0000-0000-0000-000000000000",i.INPUT=this.docObj.dt()[0].OUTPUT,this.paymentObj.addEmpty(i);case 18:return(o=H({},this.paymentObj.docCustomer.empty)).DOC_GUID=this.paymentObj.dt()[0].GUID,o.TYPE=this.paymentObj.dt()[0].TYPE,o.REF=this.paymentObj.dt()[0].REF,o.REF_NO=this.paymentObj.dt()[0].REF_NO,o.DOC_TYPE=this.paymentObj.dt()[0].DOC_TYPE,o.DOC_DATE=this.paymentObj.dt()[0].DOC_DATE,o.INPUT=this.paymentObj.dt()[0].INPUT,o.INVOICE_GUID=this.docObj.dt()[0].GUID,0==e?(o.OUTPUT=this.cmbCashSafe.value,o.OUTPUT_NAME=this.cmbCashSafe.displayValue,o.PAY_TYPE=0,o.AMOUNT=n,o.DESCRIPTION=this.cashDescription.value):1==e?(o.OUTPUT=this.cmbCashSafe.value,o.OUTPUT_NAME=this.cmbCashSafe.displayValue,o.PAY_TYPE=1,o.AMOUNT=n,o.DESCRIPTION=this.cashDescription.value,(c=H({},this.paymentObj.checkCls.empty)).DOC_GUID=this.paymentObj.dt()[0].GUID,c.REF=checkReference.value,c.DOC_DATE=this.paymentObj.dt()[0].DOC_DATE,c.CHECK_DATE=this.paymentObj.dt()[0].DOC_DATE,c.CUSTOMER=this.paymentObj.dt()[0].OUTPUT,c.AMOUNT=n,c.SAFE=this.cmbCashSafe.value,this.paymentObj.checkCls.addEmpty(c)):2==e&&(o.OUTPUT=this.cmbCashSafe.value,o.OUTPUT_NAME=this.cmbCashSafe.displayValue,o.PAY_TYPE=2,o.AMOUNT=n,o.DESCRIPTION=this.cashDescription.value),t.next=30,this.paymentObj.docCustomer.addEmpty(o);case 30:return this.paymentObj.dt()[0].AMOUNT=this.paymentObj.docCustomer.dt().sum("AMOUNT",2),this.paymentObj.dt()[0].TOTAL=this.paymentObj.docCustomer.dt().sum("AMOUNT",2),t.next=34,this.paymentObj.save();case 34:if(t.t0=t.sent,0!=t.t0){t.next=36;break}case 36:return t.next=38,this._getPayment();case 38:this.popPayment.show();case 39:case"end":return t.stop()}}),t,this)}))),function(t,e){return _.apply(this,arguments)})},{key:"multiItemAdd",value:(C=(0,s.Z)(h().mark((function t(){var e,n,a,i,r,s,o,c,l,d;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=[],n=0,!(this.multiItemData.length>0)){t.next=8;break}return a={id:"msgMultiData",showTitle:!0,title:this.t("msgMultiData.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgMultiData.btn01"),location:"before"},{id:"btn02",caption:this.t("msgMultiData.btn02"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgMultiData.msg"))},t.next=6,(0,B.W)(a);case 6:"btn01"==t.sent&&this.multiItemData.clear();case 8:i=0;case 9:if(!(i<this.tagItemCode.value.length)){t.next=27;break}if(0!=this.cmbMultiItemType.value){t.next=18;break}return r={query:"SELECT GUID,CODE,NAME,VAT,1 AS QUANTITY,ISNULL((SELECT TOP 1 MULTICODE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS_VW_01.GUID AND CUSTOMER_GUID = '"+this.docObj.dt()[0].OUTPUT+"'),'') AS MULTICODE FROM ITEMS_VW_01 WHERE ISNULL((SELECT TOP 1 MULTICODE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS_VW_01.GUID AND CUSTOMER_GUID = '"+this.docObj.dt()[0].OUTPUT+"'),'') = @VALUE ",param:["VALUE:string|50"],value:[this.tagItemCode.value[i]]},t.next=14,this.core.sql.execute(r);case 14:(s=t.sent).result.recordset.length>0?void 0===this.multiItemData.where({CODE:s.result.recordset[0].CODE})[0]&&(this.multiItemData.push(s.result.recordset[0]),n+=1):e.push("'"+this.tagItemCode.value[i]+"'"),t.next=24;break;case 18:if(1!=this.cmbMultiItemType.value){t.next=24;break}return o={query:"SELECT GUID,CODE,NAME,VAT,1 AS QUANTITY,ISNULL((SELECT TOP 1 MULTICODE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS_VW_01.GUID AND CUSTOMER_GUID = '"+this.docObj.dt()[0].OUTPUT+"'),'') AS MULTICODE FROM ITEMS_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VALUE) OR UPPER(NAME) LIKE UPPER(@VALUE) ",param:["VALUE:string|50"],value:[this.tagItemCode.value[i]]},t.next=22,this.core.sql.execute(o);case 22:(c=t.sent).result.recordset.length>0?void 0===this.multiItemData.where({CODE:c.result.recordset[0].CODE})[0]&&(this.multiItemData.push(c.result.recordset[0]),n+=1):e.push("'"+this.tagItemCode.value[i]+"'");case 24:i++,t.next=9;break;case 27:if(!(e.length>0)){t.next=31;break}return l={id:"msgMissItemCode",showTitle:!0,title:this.t("msgMissItemCode.title"),showCloseButton:!0,width:"500px",height:"auto",button:[{id:"btn01",caption:this.t("msgMissItemCode.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",wordWrap:"break-word",fontSize:"20px"}},this.t("msgMissItemCode.msg")+" "+e)},t.next=31,(0,B.W)(l);case 31:return d={id:"msgMultiCodeCount",showTitle:!0,title:this.t("msgMultiCodeCount.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgMultiCodeCount.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgMultiCodeCount.msg")+" "+n)},t.next=34,(0,B.W)(d);case 34:case"end":return t.stop()}}),t,this)}))),function(){return C.apply(this,arguments)})},{key:"excelAdd",value:(f=(0,s.Z)(h().mark((function t(e){var n,a,i,r,s,o,c,l,d;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"string"==typeof(n=this.prmObj.filter({ID:"excelFormat",USERS:this.user.CODE}).getValue())&&(n=JSON.parse(n)),a=[],i=0,r=0;case 5:if(!(r<e.length)){t.next=37;break}return s={query:"SELECT GUID,CODE,NAME,VAT,1 AS QUANTITY,ISNULL((SELECT TOP 1 MULTICODE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS_VW_01.GUID AND CUSTOMER_GUID = '"+this.docObj.dt()[0].OUTPUT+"'),'') AS MULTICODE FROM ITEMS_VW_01 WHERE ISNULL((SELECT TOP 1 MULTICODE FROM ITEM_MULTICODE_VW_01 WHERE ITEM_GUID = ITEMS_VW_01.GUID AND CUSTOMER_GUID = '"+this.docObj.dt()[0].OUTPUT+"'),'') = @VALUE AND STATUS = 1 ",param:["VALUE:string|50"],value:[e[r][n.CODE]]},t.next=9,this.core.sql.execute(s);case 9:if(!((o=t.sent).result.recordset.length>0)){t.next=33;break}return(c=H({},this.docObj.docItems.empty)).DOC_GUID=this.docObj.dt()[0].GUID,c.TYPE=this.docObj.dt()[0].TYPE,c.DOC_TYPE=this.docObj.dt()[0].DOC_TYPE,c.REBATE=this.docObj.dt()[0].REBATE,c.LINE_NO=this.docObj.docItems.dt().length,c.REF=this.docObj.dt()[0].REF,c.REF_NO=this.docObj.dt()[0].REF_NO,c.OUTPUT=this.docObj.dt()[0].OUTPUT,c.INPUT=this.docObj.dt()[0].INPUT,c.DOC_DATE=this.docObj.dt()[0].DOC_DATE,c.SHIPMENT_DATE=this.docObj.dt()[0].SHIPMENT_DATE,this.txtRef.readOnly=!0,this.txtRefno.readOnly=!0,this.docObj.docItems.addEmpty(c),t.next=28,this.core.util.waitUntil(100);case 28:return t.next=30,this.addItem(o.result.recordset[0],this.docObj.docItems.dt().length-1,e[r][n.QTY],e[r][n.PRICE],e[r][n.DISC],e[r][n.DISC_PER],e[r][n.TVA]);case 30:i+=1,t.next=34;break;case 33:a.push("'"+e[r].CODE+"'");case 34:r++,t.next=5;break;case 37:if(!(a.length>0)){t.next=41;break}return l={id:"msgMissItemCode",showTitle:!0,title:this.t("msgMissItemCode.title"),showCloseButton:!0,width:"500px",height:"auto",button:[{id:"btn01",caption:this.t("msgMissItemCode.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",wordWrap:"break-word",fontSize:"20px"}},this.t("msgMissItemCode.msg")+" "+a)},t.next=41,(0,B.W)(l);case 41:return d={id:"msgMultiCodeCount",showTitle:!0,title:this.t("msgMultiCodeCount.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgMultiCodeCount.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgMultiCodeCount.msg")+" "+i)},t.next=44,(0,B.W)(d);case 44:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"multiItemSave",value:(p=(0,s.Z)(h().mark((function t(){var e,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.customerControl=!0,this.customerClear=!1,this.combineControl=!0,this.combineNew=!1,e=0;case 5:if(!(e<this.multiItemData.length)){t.next=29;break}return(n=H({},this.docObj.docItems.empty)).DOC_GUID=this.docObj.dt()[0].GUID,n.TYPE=this.docObj.dt()[0].TYPE,n.DOC_TYPE=this.docObj.dt()[0].DOC_TYPE,n.REBATE=this.docObj.dt()[0].REBATE,n.LINE_NO=this.docObj.docItems.dt().length,n.REF=this.docObj.dt()[0].REF,n.REF_NO=this.docObj.dt()[0].REF_NO,n.OUTPUT=this.docObj.dt()[0].OUTPUT,n.INPUT=this.docObj.dt()[0].INPUT,n.DOC_DATE=this.docObj.dt()[0].DOC_DATE,n.SHIPMENT_DATE=this.docObj.dt()[0].SHIPMENT_DATE,this.txtRef.readOnly=!0,this.txtRefno.readOnly=!0,this.docObj.docItems.addEmpty(n),t.next=23,this.core.util.waitUntil(100);case 23:return t.next=25,this.addItem(this.multiItemData[e],this.docObj.docItems.dt().length-1,this.multiItemData[e].QUANTITY);case 25:this.popMultiItem.hide();case 26:e++,t.next=5;break;case 29:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"_getBarcodes",value:(E=(0,s.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e={source:{select:{query:"SELECT ITEMS_VW_01.GUID,CODE,NAME,COST_PRICE,VAT,BARCODE,ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM_MULTICODE.ITEM = ITEMS_VW_01.GUID AND ITEM_MULTICODE.CUSTOMER = '"+this.docObj.dt()[0].OUTPUT+"' AND DELETED = 0 ORDER BY LDATE DESC),'') AS MULTICODE,  ISNULL((SELECT TOP 1 CUSTOMER_NAME FROM ITEM_MULTICODE_VW_01 WHERE ITEM_MULTICODE_VW_01.ITEM_GUID = ITEMS_VW_01.GUID ORDER BY LDATE DESC),'') AS CUSTOMER_NAME  FROM ITEMS_VW_01 INNER JOIN ITEM_BARCODE_VW_01 ON ITEMS_VW_01.GUID = ITEM_BARCODE_VW_01.ITEM_GUID WHERE  ITEM_BARCODE_VW_01.BARCODE LIKE  '%' +@BARCODE",param:["BARCODE:string|50"]},sql:this.core.sql}},this.pg_txtBarcode.setSource(e);case 2:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)})},{key:"saveDoc",value:(r=(0,s.Z)(h().mark((function t(){var e,n,a,i,r=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:"msgSave",showTitle:!0,title:this.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgSave.btn01"),location:"before"},{id:"btn02",caption:this.t("msgSave.btn02"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgSave.msg"))},t.next=3,(0,B.W)(e);case 3:if("btn01"!=t.sent){t.next=32;break}if(void 0===(n=this.sysParam.filter({ID:"purcInvoÄ±cePriceSave",USERS:this.user.CODE}).getValue())||1!=n.value){t.next=16;break}for(this.newPrice.clear(),this.newVat.clear(),a=0;a<this.docObj.docItems.dt().length;a++)0==this.docObj.docItems.dt()[a].ITEM_TYPE&&(void 0!==this.docObj.docItems.dt()[a].OLD_VAT&&this.docObj.docItems.dt()[a].VAT_RATE!=this.docObj.docItems.dt()[a].OLD_VAT&&this.newVat.push(H({},this.docObj.docItems.dt()[a])),this.docObj.docItems.dt()[a].CUSTOMER_PRICE!=this.docObj.docItems.dt()[a].PRICE&&this.newPrice.push(H({},this.docObj.docItems.dt()[a])));if(!(this.newPrice.length>0)){t.next=13;break}return t.next=13,this.msgNewPrice.show().then(function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("btn02"!=e){t.next=12;break}n=0;case 3:if(!(n<r.grdNewPrice.getSelectedData().length)){t.next=12;break}return a=new Y.p6,t.next=7,a.load({ITEM_CODE:r.grdNewPrice.getSelectedData()[n].ITEM_CODE,CUSTOMER_CODE:r.grdNewPrice.getSelectedData()[n].CUSTOMER_CODE});case 7:a.dt()[0].CUSTOMER_PRICE=r.grdNewPrice.getSelectedData()[n].PRICE,a.save();case 9:n++,t.next=3;break;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 13:if(!(this.newVat.length>0)){t.next=16;break}return t.next=16,this.msgNewVat.show().then(function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("btn02"!=e){t.next=10;break}n=0;case 3:if(!(n<r.grdNewVat.getSelectedData().length)){t.next=10;break}return a={query:"UPDATE ITEMS SET VAT = @VAT WHERE GUID = @GUID",param:["GUID:string|50","VAT:float"],value:[r.grdNewVat.getSelectedData()[n].ITEM,r.grdNewVat.getSelectedData()[n].VAT_RATE]},t.next=7,r.core.sql.execute(a);case 7:n++,t.next=3;break;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 16:return i={id:"msgSaveResult",showTitle:!0,title:this.t("msgSave.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:this.t("msgSave.btn01"),location:"after"}]},t.next=19,this.docObj.save();case 19:if(t.t0=t.sent,0!=t.t0){t.next=29;break}return i.content=T.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"green"}},this.t("msgSaveResult.msgSuccess")),t.next=24,(0,B.W)(i);case 24:this._getPayment(),this.btnSave.setState({disabled:!0}),this.btnNew.setState({disabled:!1}),t.next=32;break;case 29:return i.content=T.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},this.t("msgSaveResult.msgFailed")),t.next=32,(0,B.W)(i);case 32:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"checkRow",value:(n=(0,s.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<this.docObj.docItems.dt().length;e++)this.docObj.docItems.dt()[e].INPUT=this.docObj.dt()[0].INPUT,this.docObj.docItems.dt()[e].OUTPUT=this.docObj.dt()[0].OUTPUT,this.docObj.docItems.dt()[e].DOC_DATE=this.docObj.dt()[0].DOC_DATE,this.docObj.docItems.dt()[e].SHIPMENT_DATE=this.docObj.dt()[0].SHIPMENT_DATE;case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getDocs",value:(e=(0,s.Z)(h().mark((function t(e){var n,a,i,r=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0==e?{query:"SELECT GUID,REF,REF_NO,OUTPUT_CODE,OUTPUT_NAME,DOC_DATE_CONVERT FROM DOC_VW_01 WHERE TYPE = 0 AND DOC_TYPE = 20 AND REBATE = 0 AND DOC_DATE > GETDATE()-30 ORDER BY DOC_DATE DESC"}:{query:"SELECT GUID,REF,REF_NO,OUTPUT_CODE,OUTPUT_NAME,DOC_DATE_CONVERT FROM DOC_VW_01 WHERE TYPE = 0 AND DOC_TYPE = 20 AND REBATE = 0 ORDER BY DOC_DATE DESC"},t.next=3,this.core.sql.execute(n);case 3:return a=t.sent,i=[],a.result.recordset.length>0&&(i=a.result.recordset),t.next=8,this.pg_Docs.setData(i);case 8:this.pg_Docs.show(),this.pg_Docs.onClick=function(t){t.length>0&&r.getDoc(t[0].GUID,t[0].REF,t[0].REF_NO)};case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t,e,n,i,r,o=this;return T.createElement("div",null,T.createElement(g(),null,T.createElement("div",{className:"row px-2 pt-2"},T.createElement("div",{className:"col-12"},T.createElement(D(),null,T.createElement(x.Item,{location:"after",locateInMenu:"auto"},T.createElement(V.Z,{id:"btnBack",parent:this,icon:"revert",type:"default",onClick:function(){o.getDoc(o.docObj.dt()[0].GUID,o.docObj.dt()[0].REF,o.docObj.dt()[0].REF_NO)}})),T.createElement(x.Item,{location:"after",locateInMenu:"auto"},T.createElement(V.Z,{id:"btnNew",parent:this,icon:"file",type:"default",onClick:function(){o.init()}})),T.createElement(x.Item,{location:"after",locateInMenu:"auto"},T.createElement(V.Z,{id:"btnSave",parent:this,icon:"floppy",type:"default",validationGroup:"frmPurcInv"+this.tabIndex,onClick:function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=o.docLocked){t.next=5;break}return n={id:"msgDocLocked",showTitle:!0,title:o.t("msgDocLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgDocLocked.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgDocLocked.msg"))},t.next=4,(0,B.W)(n);case 4:return t.abrupt("return");case 5:if(""!=o.docObj.docItems.dt()[o.docObj.docItems.dt().length-1].ITEM_CODE){t.next=8;break}return t.next=8,o.grdPurcInv.devGrid.deleteRow(o.docObj.docItems.dt().length-1);case 8:if("valid"!=e.validationGroup.validate().status){t.next=12;break}o.saveDoc(),t.next=15;break;case 12:return a={id:"msgSaveValid",showTitle:!0,title:o.t("msgSaveValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgSaveValid.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgSaveValid.msg"))},t.next=15,(0,B.W)(a);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),T.createElement(x.Item,{location:"after",locateInMenu:"auto"},T.createElement(V.Z,{id:"btnDelete",parent:this,icon:"trash",type:"default",onClick:(0,s.Z)(h().mark((function t(){var e,n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o.paymentObj.docCustomer.dt().length>0)){t.next=5;break}return e={id:"msgPayNotDeleted",showTitle:!0,title:o.t("msgPayNotDeleted.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgPayNotDeleted.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgPayNotDeleted.msg"))},t.next=4,(0,B.W)(e);case 4:return t.abrupt("return");case 5:if(0==o.docObj.dt()[0].LOCKED){t.next=11;break}return o.docLocked=!0,n={id:"msgGetLocked",showTitle:!0,title:o.t("msgGetLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgGetLocked.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgGetLocked.msg"))},t.next=10,(0,B.W)(n);case 10:return t.abrupt("return");case 11:return a={id:"msgDelete",showTitle:!0,title:o.t("msgDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgDelete.btn01"),location:"before"},{id:"btn02",caption:o.t("msgDelete.btn02"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgDelete.msg"))},t.next=14,(0,B.W)(a);case 14:if("btn01"!=t.sent){t.next=20;break}return o.docObj.dt("DOC").removeAt(0),t.next=19,o.docObj.dt("DOC").delete();case 19:o.init();case 20:case"end":return t.stop()}}),t)})))})),T.createElement(x.Item,{location:"after",locateInMenu:"auto"},T.createElement(V.Z,{id:"btnLock",parent:this,icon:"key",type:"default",onClick:(0,s.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=o.docObj.dt()[0].LOCKED){t.next=20;break}if(o.docObj.dt()[0].LOCKED=1,""!=o.docObj.docItems.dt()[o.docObj.docItems.dt().length-1].ITEM_CODE){t.next=5;break}return t.next=5,o.grdPurcInv.devGrid.deleteRow(o.docObj.docItems.dt().length-1);case 5:return t.next=7,o.docObj.save();case 7:if(t.t0=t.sent,0!=t.t0){t.next=15;break}return e={id:"msgLocked",showTitle:!0,title:o.t("msgLocked.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgLocked.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgLocked.msg"))},t.next=12,(0,B.W)(e);case 12:o.frmDocItems.option("disabled",!0),t.next=18;break;case 15:return tmpConfObj1.content=T.createElement("div",{style:{textAlign:"center",fontSize:"20px",color:"red"}},o.t("msgSaveResult.msgFailed")),t.next=18,(0,B.W)(tmpConfObj1);case 18:t.next=22;break;case 20:o.popPassword.show(),o.txtPassword.value="";case 22:case"end":return t.stop()}}),t)})))})),T.createElement(x.Item,{location:"after",locateInMenu:"auto"},T.createElement(V.Z,{id:"btnInfo",parent:this,icon:"info",type:"default",onClick:(0,s.Z)(h().mark((function t(){var e,n,a,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.numDetailCount.value=o.docObj.docItems.dt().length,o.numDetailQuantity.value=o.docObj.docItems.dt().sum("QUANTITY",2),e=0,n=0;case 4:if(!(n<o.docObj.docItems.dt().length)){t.next=13;break}return a={query:"SELECT [dbo].[FN_UNIT2_QUANTITY](@ITEM) AS QUANTITY",param:["ITEM:string|50"],value:[o.docObj.docItems.dt()[n].ITEM]},t.next=8,o.core.sql.execute(a);case 8:(i=t.sent).result.recordset.length>0&&(e+=i.result.recordset[0].QUANTITY*o.docObj.docItems.dt()[n].QUANTITY);case 10:n++,t.next=4;break;case 13:o.numDetailQuantity2.value=e.toFixed(3),o.popDetail.show();case 15:case"end":return t.stop()}}),t)})))})),T.createElement(x.Item,{location:"after",locateInMenu:"auto"},T.createElement(V.Z,{id:"btnPrint",parent:this,icon:"print",type:"default",onClick:function(){o.popDesign.show()}})),T.createElement(x.Item,{location:"after",locateInMenu:"auto",widget:"dxButton",options:{type:"default",icon:"clear",onClick:(r=(0,s.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:"msgClose",showTitle:!0,title:o.lang.t("msgWarning"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.lang.t("btnYes"),location:"before"},{id:"btn02",caption:o.lang.t("btnNo"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.lang.t("msgClose"))},t.next=3,(0,B.W)(e);case 3:"btn01"==t.sent&&I.Z.instance.panel.closePage();case 5:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}})))),T.createElement("div",{className:"row px-2 pt-2"},T.createElement("div",{className:"col-12"},T.createElement(v(),{colCount:3,id:"frmPurcInv"+this.tabIndex},T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtRefRefno"),alignment:"right"}),T.createElement("div",{className:"row"},T.createElement("div",{className:"col-4 pe-0"},T.createElement(A.ZP,{id:"txtRef",parent:this,simple:!0,dt:{data:this.docObj.dt("DOC"),field:"REF"},upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,readOnly:!0,maxLength:32,onValueChanged:function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={query:"SELECT ISNULL(MAX(REF_NO) + 1,1) AS REF_NO FROM DOC WHERE TYPE = 0 AND DOC_TYPE = 20 AND REF = @REF ",param:["REF:string|25"],value:[o.txtRef.value]},t.next=3,o.core.sql.execute(n);case 3:(a=t.sent).result.recordset.length>0&&(o.txtRefno.value=a.result.recordset[0].REF_NO,o.docObj.docCustomer.dt()[0].REF_NO=a.result.recordset[0].REF_NO);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),param:this.param.filter({ELEMENT:"txtRef",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRef",USERS:this.user.CODE})},T.createElement(A.cX,{validationGroup:"frmPurcInv"+this.tabIndex},T.createElement(A.n2,{message:this.t("validRef")})))),T.createElement("div",{className:"col-5 ps-0"},T.createElement(A.ZP,{id:"txtRefno",parent:this,simple:!0,dt:{data:this.docObj.dt("DOC"),field:"REF_NO"},readOnly:!0,button:[{id:"01",icon:"more",onClick:function(){o.getDocs(0)}},{id:"02",icon:"arrowdown",onClick:function(){o.txtRefno.value=Math.floor(Date.now()/1e3)}}],onChange:(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.docObj.docCustomer.dt()[0].REF_NO=o.txtRefno.value,t.next=3,o.checkDoc("00000000-0000-0000-0000-000000000000",o.txtRef.value,o.txtRefno.value);case 3:3==t.sent&&(o.txtRefno.value="");case 5:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"txtRefno",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtRefno",USERS:this.user.CODE})},T.createElement(A.cX,{validationGroup:"frmPurcInv"+this.tabIndex},T.createElement(A.n2,{message:this.t("validRefNo")}))))),T.createElement(k.Z,{id:"pg_Docs",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_Docs.title"),button:[{id:"01",icon:"more",onClick:function(){o.getDocs(1)}}]},T.createElement(L.sg,{dataField:"REF",caption:this.t("pg_Docs.clmRef"),width:150}),T.createElement(L.sg,{dataField:"REF_NO",caption:this.t("pg_Docs.clmRefNo"),width:120}),T.createElement(L.sg,{dataField:"DOC_DATE_CONVERT",caption:this.t("pg_Docs.clmDate"),width:300}),T.createElement(L.sg,{dataField:"OUTPUT_NAME",caption:this.t("pg_Docs.clmOutputName"),width:300}),T.createElement(L.sg,{dataField:"OUTPUT_CODE",caption:this.t("pg_Docs.clmOutputCode"),width:300}))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("cmbDepot"),alignment:"right"}),T.createElement(M.ZP,{simple:!0,parent:this,id:"cmbDepot",notRefresh:!0,dt:{data:this.docObj.dt("DOC"),field:"INPUT"},displayExpr:"NAME",valueExpr:"GUID",value:"",searchEnabled:!0,onValueChanged:(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.docObj.docCustomer.dt()[0].INPUT=o.cmbDepot.value,o.checkRow(),""!=o.txtCustomerCode.value&&""!=o.cmbDepot.value&&0==o.docLocked&&o.frmDocItems.option("disabled",!1);case 3:case"end":return t.stop()}}),t)}))).bind(this),data:{source:{select:{query:"SELECT * FROM DEPOT_VW_01 WHERE TYPE IN(0,2)"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbDepot",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbDepot",USERS:this.user.CODE})},T.createElement(A.cX,{validationGroup:"frmPurcInv"+this.tabIndex},T.createElement(A.n2,{message:this.t("validDepot")})))),T.createElement(x.EmptyItem,null),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtCustomerCode"),alignment:"right"}),T.createElement(A.ZP,{id:"txtCustomerCode",parent:this,simple:!0,notRefresh:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,dt:{data:this.docObj.dt("DOC"),field:"OUTPUT_CODE"},onEnterKey:(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.pg_txtCustomerCode.setVal(o.txtCustomerCode.value);case 2:o.pg_txtCustomerCode.show(),o.pg_txtCustomerCode.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){var n,a,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=23;break}return o.docObj.dt()[0].OUTPUT=e[0].GUID,o.docObj.docCustomer.dt()[0].OUTPUT=e[0].GUID,o.docObj.dt()[0].OUTPUT_CODE=e[0].CODE,o.docObj.dt()[0].OUTPUT_NAME=e[0].TITLE,void 0!==(n=o.sysParam.filter({ID:"refForCustomerCode",USERS:o.user.CODE}).getValue())&&1==n.value&&(o.txtRef.value=e[0].CODE,o.txtRef.props.onValueChanged()),""!=o.txtCustomerCode.value&&""!=o.cmbDepot.value&&0==o.docLocked&&o.frmDocItems.option("disabled",!1),a={query:"SELECT * FROM CUSTOMER_ADRESS_VW_01 WHERE CUSTOMER = @CUSTOMER",param:["CUSTOMER:string|50"],value:[e[0].GUID]},t.next=11,o.core.sql.execute(a);case 11:if(!((i=t.sent).result.recordset.length>1)){t.next=19;break}return t.next=15,o.pg_adress.setData(i.result.recordset);case 15:o.pg_adress.show(),o.pg_adress.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.length>0&&(o.docObj.dt()[0].ADDRESS=e[0].TYPE);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=21;break;case 19:return t.next=21,o.pg_adress.setData([]);case 21:o._getItems(),o._getBarcodes();case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case 4:case"end":return t.stop()}}),t)}))).bind(this),button:[{id:"01",icon:"more",onClick:function(){o.pg_txtCustomerCode.show(),o.pg_txtCustomerCode.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){var n,a,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=23;break}return o.docObj.dt()[0].OUTPUT=e[0].GUID,o.docObj.docCustomer.dt()[0].OUTPUT=e[0].GUID,o.docObj.dt()[0].OUTPUT_CODE=e[0].CODE,o.docObj.dt()[0].OUTPUT_NAME=e[0].TITLE,void 0!==(n=o.sysParam.filter({ID:"refForCustomerCode",USERS:o.user.CODE}).getValue())&&1==n.value&&(o.txtRef.value=e[0].CODE,o.txtRef.props.onValueChanged()),""!=o.txtCustomerCode.value&&""!=o.cmbDepot.value&&0==o.docLocked&&o.frmDocItems.option("disabled",!1),a={query:"SELECT * FROM CUSTOMER_ADRESS_VW_01 WHERE CUSTOMER = @CUSTOMER",param:["CUSTOMER:string|50"],value:[e[0].GUID]},t.next=11,o.core.sql.execute(a);case 11:if(!((i=t.sent).result.recordset.length>1)){t.next=19;break}return t.next=15,o.pg_adress.setData(i.result.recordset);case 15:o.pg_adress.show(),o.pg_adress.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.length>0&&(o.docObj.dt()[0].ADDRESS=e[0].TYPE);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=21;break;case 19:return t.next=21,o.pg_adress.setData([]);case 21:o._getItems(),o._getBarcodes();case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}],param:this.param.filter({ELEMENT:"txtCustomerCode",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCustomerCode",USERS:this.user.CODE})},T.createElement(A.cX,{validationGroup:"frmPurcInv"+this.tabIndex},T.createElement(A.n2,{message:this.t("validCustomerCode")}))),T.createElement(k.Z,{id:"pg_txtCustomerCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtCustomerCode.title"),search:!0,data:{source:{select:{query:"SELECT GUID,CODE,TITLE,NAME,LAST_NAME,[TYPE_NAME],[GENUS_NAME] FROM CUSTOMER_VW_01 WHERE UPPER(CODE) LIKE UPPER(@VAL) OR UPPER(TITLE) LIKE UPPER(@VAL)",param:["VAL:string|50"]},sql:this.core.sql}},button:{id:"01",icon:"more",onClick:function(){}}},T.createElement(L.sg,{dataField:"CODE",caption:this.t("pg_txtCustomerCode.clmCode"),width:150}),T.createElement(L.sg,{dataField:"TITLE",caption:this.t("pg_txtCustomerCode.clmTitle"),width:500,defaultSortOrder:"asc"}),T.createElement(L.sg,{dataField:"TYPE_NAME",caption:this.t("pg_txtCustomerCode.clmTypeName"),width:150}),T.createElement(L.sg,{dataField:"GENUS_NAME",caption:this.t("pg_txtCustomerCode.clmGenusName"),width:150,filterType:"include",filterValues:["TedarikÃ§i"]}))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtCustomerName"),alignment:"right"}),T.createElement(A.ZP,{id:"txtCustomerName",parent:this,simple:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,dt:{data:this.docObj.dt("DOC"),field:"OUTPUT_NAME"},readOnly:!0,param:this.param.filter({ELEMENT:"txtCustomerName",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtCustomerName",USERS:this.user.CODE})})),T.createElement(x.EmptyItem,null),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("dtDocDate"),alignment:"right"}),T.createElement(Z.ZP,{simple:!0,parent:this,id:"dtDocDate",dt:{data:this.docObj.dt("DOC"),field:"DOC_DATE"},onValueChanged:(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.checkRow(),o.docObj.docCustomer.dt()[0].DOC_DATE=O()(o.dtDocDate.value).format("DD/MM/YYYY");case 2:case"end":return t.stop()}}),t)}))).bind(this)},T.createElement(A.cX,{validationGroup:"frmPurcInv"+this.tabIndex},T.createElement(A.n2,{message:this.t("validDocDate")})))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("dtShipDate"),alignment:"right"}),T.createElement(Z.ZP,{simple:!0,parent:this,id:"dtShipDate",dt:{data:this.docObj.dt("DOC"),field:"SHIPMENT_DATE"},onValueChanged:(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.checkRow();case 1:case"end":return t.stop()}}),t)}))).bind(this)},T.createElement(A.cX,{validationGroup:"frmPurcInv"+this.tabIndex},T.createElement(A.n2,{message:this.t("validDocDate")})))),T.createElement(x.EmptyItem,null),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtBarcode"),alignment:"right"}),T.createElement(A.ZP,{id:"txtBarcode",parent:this,simple:!0,placeholder:this.t("txtBarcodePlace"),upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,button:[{id:"01",icon:"fa-solid fa-barcode",onClick:(i=(0,s.Z)(h().mark((function t(e){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=o.cmbDepot.value&&""!=o.txtCustomerCode.value){t.next=6;break}return n={id:"msgDocValid",showTitle:!0,title:o.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgDocValid.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgDocValid.msg"))},t.next=4,(0,B.W)(n);case 4:return o.txtBarcode.setState({value:""}),t.abrupt("return");case 6:return t.next=8,o.pg_txtBarcode.setVal(o.txtBarcode.value);case 8:o.pg_txtBarcode.show(),o.pg_txtBarcode.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){var n,a,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.txtBarcode.setState({value:""}),(n=H({},o.docObj.docItems.empty)).DOC_GUID=o.docObj.dt()[0].GUID,n.TYPE=o.docObj.dt()[0].TYPE,n.DOC_TYPE=o.docObj.dt()[0].DOC_TYPE,n.REBATE=o.docObj.dt()[0].REBATE,n.LINE_NO=o.docObj.docItems.dt().length,n.REF=o.docObj.dt()[0].REF,n.REF_NO=o.docObj.dt()[0].REF_NO,n.OUTPUT=o.docObj.dt()[0].OUTPUT,n.INPUT=o.docObj.dt()[0].INPUT,n.DOC_DATE=o.docObj.dt()[0].DOC_DATE,n.SHIPMENT_DATE=o.docObj.dt()[0].SHIPMENT_DATE,o.txtRef.readOnly=!0,o.txtRefno.readOnly=!0,o.docObj.docItems.addEmpty(n),t.next=18,o.core.util.waitUntil(100);case 18:if(!(e.length>0)){t.next=58;break}if(o.customerControl=!0,o.customerClear=!1,o.combineControl=!0,o.combineNew=!1,1!=e.length){t.next=28;break}return t.next=26,o.addItem(e[0],o.docObj.docItems.dt().length-1);case 26:t.next=58;break;case 28:if(!(e.length>1)){t.next=58;break}a=0;case 30:if(!(a<e.length)){t.next=58;break}if(0!=a){t.next=36;break}return t.next=34,o.addItem(e[a],o.docObj.docItems.dt().length-1);case 34:t.next=55;break;case 36:return(i=H({},o.docObj.docItems.empty)).DOC_GUID=o.docObj.dt()[0].GUID,i.TYPE=o.docObj.dt()[0].TYPE,i.DOC_TYPE=o.docObj.dt()[0].DOC_TYPE,i.REBATE=o.docObj.dt()[0].REBATE,i.LINE_NO=o.docObj.docItems.dt().length,i.REF=o.docObj.dt()[0].REF,i.REF_NO=o.docObj.dt()[0].REF_NO,i.OUTPUT=o.docObj.dt()[0].OUTPUT,i.INPUT=o.docObj.dt()[0].INPUT,i.DOC_DATE=o.docObj.dt()[0].DOC_DATE,i.SHIPMENT_DATE=o.docObj.dt()[0].SHIPMENT_DATE,o.txtRef.readOnly=!0,o.txtRefno.readOnly=!0,o.docObj.docItems.addEmpty(i),t.next=53,o.core.util.waitUntil(100);case 53:return t.next=55,o.addItem(e[a],o.docObj.docItems.dt().length-1);case 55:a++,t.next=30;break;case 58:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();case 10:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})}],onEnterKey:function(){var t=(0,s.Z)(h().mark((function t(e){var n,a,i,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=o.cmbDepot.value){t.next=6;break}return n={id:"msgDocValid",showTitle:!0,title:o.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgDocValid.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgDocValid.msg"))},t.next=4,(0,B.W)(n);case 4:return o.txtBarcode.setState({value:""}),t.abrupt("return");case 6:return a={query:"SELECT ITEMS_VW_01.GUID,CODE,NAME,COST_PRICE,VAT,ISNULL((SELECT TOP 1 CODE FROM ITEM_MULTICODE WHERE ITEM_MULTICODE.ITEM = ITEMS_VW_01.GUID AND ITEM_MULTICODE.CUSTOMER = @CUSTOMER AND DELETED = 0 ORDER BY LDATE DESC),'') AS MULTICODE,  ISNULL((SELECT TOP 1 CUSTOMER_NAME FROM ITEM_MULTICODE_VW_01 WHERE ITEM_MULTICODE_VW_01.ITEM_GUID = ITEMS_VW_01.GUID ORDER BY LDATE DESC),'') AS CUSTOMER_NAME  FROM ITEMS_VW_01 INNER JOIN ITEM_BARCODE_VW_01 ON ITEMS_VW_01.GUID = ITEM_BARCODE_VW_01.ITEM_GUID WHERE CODE = @CODE OR ITEM_BARCODE_VW_01.BARCODE = @CODE",param:["CODE:string|50","CUSTOMER:string|50"],value:[o.txtBarcode.value,o.docObj.dt()[0].OUTPUT]},t.next=9,o.core.sql.execute(a);case 9:if(i=t.sent,o.txtBarcode.setState({value:""}),!(i.result.recordset.length>0)){t.next=19;break}return o.txtPopQuantity.value="",setTimeout((0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.txtPopQuantity.focus();case 1:case"end":return t.stop()}}),t)}))),700),t.next=16,o.msgQuantity.show().then(function(){var t=(0,s.Z)(h().mark((function t(e){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=H({},o.docObj.docItems.empty)).DOC_GUID=o.docObj.dt()[0].GUID,n.TYPE=o.docObj.dt()[0].TYPE,n.DOC_TYPE=o.docObj.dt()[0].DOC_TYPE,n.REBATE=o.docObj.dt()[0].REBATE,n.LINE_NO=o.docObj.docItems.dt().length,n.REF=o.docObj.dt()[0].REF,n.REF_NO=o.docObj.dt()[0].REF_NO,n.OUTPUT=o.docObj.dt()[0].OUTPUT,n.INPUT=o.docObj.dt()[0].INPUT,n.DOC_DATE=o.docObj.dt()[0].DOC_DATE,n.SHIPMENT_DATE=o.docObj.dt()[0].SHIPMENT_DATE,o.txtRef.readOnly=!0,o.txtRefno.readOnly=!0,o.docObj.docItems.addEmpty(n),t.next=17,o.core.util.waitUntil(100);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 16:o.addItem(i.result.recordset[0],void 0===o.docObj.docItems.dt()[0]?0:o.docObj.docItems.dt().length-1,o.txtPopQuantity.value),t.next=22;break;case 19:return r={id:"msgItemNotFound",showTitle:!0,title:o.t("msgItemNotFound.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgItemNotFound.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgItemNotFound.msg"))},t.next=22,(0,B.W)(r);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),param:this.param.filter({ELEMENT:"txtBarcode",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"txtBarcode",USERS:this.user.CODE})}))))),T.createElement("div",{className:"row px-2 pt-2"},T.createElement("div",{className:"col-12"},T.createElement(v(),{colCount:1,onInitialized:function(t){o.frmDocItems=t.component}},T.createElement(x.Item,{colSpan:3},T.createElement(y.Button,{icon:"add",validationGroup:"frmPurcInv"+this.tabIndex,onClick:function(){var t=(0,s.Z)(h().mark((function t(e){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=10;break}if(void 0===o.docObj.docItems.dt()[0]){t.next=6;break}if(""!=o.docObj.docItems.dt()[o.docObj.docItems.dt().length-1].ITEM_CODE){t.next=6;break}return o.pg_txtItemsCode.show(),o.pg_txtItemsCode.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.customerControl=!0,o.customerClear=!1,o.combineControl=!0,o.combineNew=!1,1!=e.length){t.next=9;break}return t.next=7,o.addItem(e[0],o.docObj.docItems.dt().length-1);case 7:t.next=39;break;case 9:if(!(e.length>1)){t.next=39;break}n=0;case 11:if(!(n<e.length)){t.next=39;break}if(0!=n){t.next=17;break}return t.next=15,o.addItem(e[n],o.docObj.docItems.dt().length-1);case 15:t.next=36;break;case 17:return(a=H({},o.docObj.docItems.empty)).DOC_GUID=o.docObj.dt()[0].GUID,a.TYPE=o.docObj.dt()[0].TYPE,a.DOC_TYPE=o.docObj.dt()[0].DOC_TYPE,a.REBATE=o.docObj.dt()[0].REBATE,a.LINE_NO=o.docObj.docItems.dt().length,a.REF=o.docObj.dt()[0].REF,a.REF_NO=o.docObj.dt()[0].REF_NO,a.OUTPUT=o.docObj.dt()[0].OUTPUT,a.INPUT=o.docObj.dt()[0].INPUT,a.DOC_DATE=o.docObj.dt()[0].DOC_DATE,a.SHIPMENT_DATE=o.docObj.dt()[0].SHIPMENT_DATE,o.txtRef.readOnly=!0,o.txtRefno.readOnly=!0,o.docObj.docItems.addEmpty(a),t.next=34,o.core.util.waitUntil(100);case 34:return t.next=36,o.addItem(e[n],o.docObj.docItems.dt().length-1);case 36:n++,t.next=11;break;case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.abrupt("return");case 6:o.pg_txtItemsCode.show(),o.pg_txtItemsCode.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){var n,a,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=H({},o.docObj.docItems.empty)).DOC_GUID=o.docObj.dt()[0].GUID,n.TYPE=o.docObj.dt()[0].TYPE,n.DOC_TYPE=o.docObj.dt()[0].DOC_TYPE,n.REBATE=o.docObj.dt()[0].REBATE,n.LINE_NO=o.docObj.docItems.dt().length,n.REF=o.docObj.dt()[0].REF,n.REF_NO=o.docObj.dt()[0].REF_NO,n.OUTPUT=o.docObj.dt()[0].OUTPUT,n.INPUT=o.docObj.dt()[0].INPUT,n.DOC_DATE=o.docObj.dt()[0].DOC_DATE,n.SHIPMENT_DATE=o.docObj.dt()[0].SHIPMENT_DATE,o.txtRef.readOnly=!0,o.txtRefno.readOnly=!0,o.docObj.docItems.addEmpty(n),t.next=17,o.core.util.waitUntil(100);case 17:if(o.customerControl=!0,o.customerClear=!1,o.combineControl=!0,o.combineNew=!1,1!=e.length){t.next=26;break}return t.next=24,o.addItem(e[0],o.docObj.docItems.dt().length-1);case 24:t.next=56;break;case 26:if(!(e.length>1)){t.next=56;break}a=0;case 28:if(!(a<e.length)){t.next=56;break}if(0!=a){t.next=34;break}return t.next=32,o.addItem(e[a],o.docObj.docItems.dt().length-1);case 32:t.next=53;break;case 34:return(i=H({},o.docObj.docItems.empty)).DOC_GUID=o.docObj.dt()[0].GUID,i.TYPE=o.docObj.dt()[0].TYPE,i.DOC_TYPE=o.docObj.dt()[0].DOC_TYPE,i.REBATE=o.docObj.dt()[0].REBATE,i.LINE_NO=o.docObj.docItems.dt().length,i.REF=o.docObj.dt()[0].REF,i.REF_NO=o.docObj.dt()[0].REF_NO,i.OUTPUT=o.docObj.dt()[0].OUTPUT,i.INPUT=o.docObj.dt()[0].INPUT,i.DOC_DATE=o.docObj.dt()[0].DOC_DATE,i.SHIPMENT_DATE=o.docObj.dt()[0].SHIPMENT_DATE,o.txtRef.readOnly=!0,o.txtRefno.readOnly=!0,o.docObj.docItems.addEmpty(i),t.next=51,o.core.util.waitUntil(100);case 51:return t.next=53,o.addItem(e[a],o.docObj.docItems.dt().length-1);case 53:a++,t.next=28;break;case 56:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=13;break;case 10:return n={id:"msgDocValid",showTitle:!0,title:o.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgDocValid.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgDocValid.msg"))},t.next=13,(0,B.W)(n);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),T.createElement(y.Button,{icon:"add",text:this.t("serviceAdd"),validationGroup:"frmPurcInv"+this.tabIndex,onClick:function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=27;break}if(void 0===o.docObj.docItems.dt()[0]){t.next=6;break}if(""!=o.docObj.docItems.dt()[o.docObj.docItems.dt().length-1].ITEM_CODE){t.next=6;break}return o.pg_service.show(),o.pg_service.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.customerControl=!0,o.customerClear=!1,o.combineControl=!0,o.combineNew=!1,1!=e.length){t.next=9;break}return t.next=7,o.addItem(e[0],o.docObj.docItems.dt().length-1);case 7:t.next=39;break;case 9:if(!(e.length>1)){t.next=39;break}n=0;case 11:if(!(n<e.length)){t.next=39;break}if(0!=n){t.next=17;break}return t.next=15,o.addItem(e[n],o.docObj.docItems.dt().length-1);case 15:t.next=36;break;case 17:return(a=H({},o.docObj.docItems.empty)).DOC_GUID=o.docObj.dt()[0].GUID,a.TYPE=o.docObj.dt()[0].TYPE,a.DOC_TYPE=o.docObj.dt()[0].DOC_TYPE,a.REBATE=o.docObj.dt()[0].REBATE,a.LINE_NO=o.docObj.docItems.dt().length,a.REF=o.docObj.dt()[0].REF,a.REF_NO=o.docObj.dt()[0].REF_NO,a.OUTPUT=o.docObj.dt()[0].OUTPUT,a.INPUT=o.docObj.dt()[0].INPUT,a.DOC_DATE=o.docObj.dt()[0].DOC_DATE,a.SHIPMENT_DATE=o.docObj.dt()[0].SHIPMENT_DATE,o.txtRef.readOnly=!0,o.txtRefno.readOnly=!0,o.docObj.docItems.addEmpty(a),t.next=34,o.core.util.waitUntil(100);case 34:return t.next=36,o.addItem(e[n],o.docObj.docItems.dt().length-1);case 36:n++,t.next=11;break;case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.abrupt("return");case 6:return(n=H({},o.docObj.docItems.empty)).DOC_GUID=o.docObj.dt()[0].GUID,n.TYPE=o.docObj.dt()[0].TYPE,n.DOC_TYPE=o.docObj.dt()[0].DOC_TYPE,n.REBATE=o.docObj.dt()[0].REBATE,n.LINE_NO=o.docObj.docItems.dt().length,n.REF=o.docObj.dt()[0].REF,n.REF_NO=o.docObj.dt()[0].REF_NO,n.OUTPUT=o.docObj.dt()[0].OUTPUT,n.INPUT=o.docObj.dt()[0].INPUT,n.DOC_DATE=o.docObj.dt()[0].DOC_DATE,n.SHIPMENT_DATE=o.docObj.dt()[0].SHIPMENT_DATE,o.txtRef.readOnly=!0,o.txtRefno.readOnly=!0,o.docObj.docItems.addEmpty(n),t.next=23,o.core.util.waitUntil(100);case 23:o.pg_service.show(),o.pg_service.onClick=function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.customerControl=!0,o.customerClear=!1,o.combineControl=!0,o.combineNew=!1,1!=e.length){t.next=9;break}return t.next=7,o.addItem(e[0],o.docObj.docItems.dt().length-1);case 7:t.next=39;break;case 9:if(!(e.length>1)){t.next=39;break}n=0;case 11:if(!(n<e.length)){t.next=39;break}if(0!=n){t.next=17;break}return t.next=15,o.addItem(e[n],o.docObj.docItems.dt().length-1);case 15:t.next=36;break;case 17:return(a=H({},o.docObj.docItems.empty)).DOC_GUID=o.docObj.dt()[0].GUID,a.TYPE=o.docObj.dt()[0].TYPE,a.DOC_TYPE=o.docObj.dt()[0].DOC_TYPE,a.REBATE=o.docObj.dt()[0].REBATE,a.LINE_NO=o.docObj.docItems.dt().length,a.REF=o.docObj.dt()[0].REF,a.REF_NO=o.docObj.dt()[0].REF_NO,a.OUTPUT=o.docObj.dt()[0].OUTPUT,a.INPUT=o.docObj.dt()[0].INPUT,a.DOC_DATE=o.docObj.dt()[0].DOC_DATE,a.SHIPMENT_DATE=o.docObj.dt()[0].SHIPMENT_DATE,o.txtRef.readOnly=!0,o.txtRefno.readOnly=!0,o.docObj.docItems.addEmpty(a),t.next=34,o.core.util.waitUntil(100);case 34:return t.next=36,o.addItem(e[n],o.docObj.docItems.dt().length-1);case 36:n++,t.next=11;break;case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=30;break;case 27:return a={id:"msgDocValid",showTitle:!0,title:o.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgDocValid.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgDocValid.msg"))},t.next=30,(0,B.W)(a);case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),T.createElement(y.Button,{icon:"add",text:this.lang.t("collectiveItemAdd"),validationGroup:"frmPurcInv"+this.tabIndex,onClick:function(){var t=(0,s.Z)(h().mark((function t(e){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("valid"!=e.validationGroup.validate().status){t.next=8;break}if(o.multiItemData.clear,o.popMultiItem.show(),void 0===o.docObj.docItems.dt()[o.docObj.docItems.dt().length-1]||""!=o.docObj.docItems.dt()[o.docObj.docItems.dt().length-1].ITEM_CODE){t.next=6;break}return t.next=6,o.grdPurcInv.devGrid.deleteRow(o.docObj.docItems.dt().length-1);case 6:t.next=11;break;case 8:return n={id:"msgDocValid",showTitle:!0,title:o.t("msgDocValid.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgDocValid.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgDocValid.msg"))},t.next=11,(0,B.W)(n);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),T.createElement(y.Button,{icon:"xlsxfile",text:this.t("excelAdd"),validationGroup:"frmPurcInv"+this.tabIndex,onClick:function(){var t=(0,s.Z)(h().mark((function t(e){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=o.prmObj.filter({ID:"excelFormat",USERS:o.user.CODE}).getValue(),console.log((0,a.Z)(n)),"string"==typeof n&&(n=JSON.parse(n)),o.txtPopExcelCode.value=n.CODE,o.txtPopExcelQty.value=n.QTY,o.txtPopExcelPrice.value=n.PRICE,o.txtPopExcelVat.value=n.TVA,o.txtPopExcelDisc.value=n.DISC,o.txtPopExcelDiscRate.value=n.DISC_PER,o.popExcel.show();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),T.createElement(x.Item,null,T.createElement(T.Fragment,null,T.createElement(L.ZP,{parent:this,id:"grdPurcInv",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,headerFilter:{visible:!0},height:"400",width:"100%",dbApply:!1,filterRow:{visible:!0},onRowPrepared:function(t){"data"==t.rowType&&1==t.data.ITEM_TYPE&&(t.rowElement.style.color="#feaa2b")},onCellPrepared:function(t){"data"===t.rowType&&"DIFF_PRICE"===t.column.dataField&&0==t.data.ITEM_TYPE&&(t.data.PRICE>t.data.CUSTOMER_PRICE?(t.cellElement.style.color="red",t.cellElement.style.fontWeight="bold"):t.data.PRICE<t.data.CUSTOMER_PRICE?(t.cellElement.style.color="green",t.cellElement.style.fontWeight="bold"):t.cellElement.style.color="blue")},onRowUpdated:function(){var t=(0,s.Z)(h().mark((function t(e){var n,a,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e.data.QUANTITY){t.next=6;break}return n={query:"SELECT [dbo].[FN_CUSTOMER_PRICE](@ITEM_GUID,@CUSTOMER_GUID,@QUANTITY,GETDATE()) AS PRICE",param:["ITEM_GUID:string|50","CUSTOMER_GUID:string|50","QUANTITY:float"],value:[e.key.ITEM,o.docObj.dt()[0].OUTPUT,e.data.QUANTITY]},t.next=4,o.core.sql.execute(n);case 4:(a=t.sent).result.recordset.length>0&&(e.key.PRICE=parseFloat(a.result.recordset[0].PRICE.toFixed(3)),o._calculateTotal());case 6:if(void 0!==e.data.DISCOUNT_RATE&&(e.key.DISCOUNT=parseFloat((e.key.AMOUNT*e.data.DISCOUNT_RATE/100).toFixed(3))),!(e.key.DISCOUNT>e.key.PRICE*e.key.QUANTITY)){t.next=12;break}return i={id:"msgDiscount",showTitle:!0,title:o.t("msgDiscount.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgDiscount.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgDiscount.msg"))},(0,B.W)(i),e.key.DISCOUNT=0,t.abrupt("return");case 12:e.key.VAT=parseFloat(((e.key.PRICE*e.key.QUANTITY-e.key.DISCOUNT)*e.key.VAT_RATE/100).toFixed(3)),e.key.AMOUNT=parseFloat((e.key.PRICE*e.key.QUANTITY).toFixed(3)),e.key.TOTAL=parseFloat((e.key.PRICE*e.key.QUANTITY-e.key.DISCOUNT+e.key.VAT).toFixed(3)),e.key.DIFF_PRICE=e.key.PRICE-e.key.CUSTOMER_PRICE,e.key.DISCOUNT>0&&(e.key.DISCOUNT_RATE=parseFloat((100-(e.key.PRICE*e.key.QUANTITY-e.key.DISCOUNT)/(e.key.PRICE*e.key.QUANTITY)*100).toFixed(3))),o._calculateTotal();case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRowRemoved:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o._calculateTotal();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T.createElement(L.Po,{defaultPageSize:10}),T.createElement(L.uE,{visible:!0,allowedPageSizes:[5,10,20,50,100],showPageSizeSelector:!0}),T.createElement(L.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),T.createElement(L.PY,{mode:"standart"}),T.createElement(L.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0,confirmDelete:!1}),T.createElement(L.D7,{fileName:this.lang.t("menu.ftr_02_001"),enabled:!0,allowExportSelectedData:!0}),T.createElement(L.sg,{dataField:"CDATE_FORMAT",caption:this.t("grdPurcInv.clmCreateDate"),width:80,allowEditing:!1,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"CUSER_NAME",caption:this.t("grdPurcInv.clmCuser"),width:90,allowEditing:!1}),T.createElement(L.sg,{dataField:"ITEM_CODE",caption:this.t("grdPurcInv.clmItemCode"),width:100,editCellRender:this._cellRoleRender,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"ITEM_NAME",caption:this.t("grdPurcInv.clmItemName"),width:260,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"QUANTITY",caption:this.t("grdPurcInv.clmQuantity"),dataType:"number",width:50,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"PRICE",caption:this.t("grdPurcInv.clmPrice"),dataType:"number",format:"â‚¬#,##0.000",width:70,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"CUSTOMER_PRICE",caption:this.t("grdPurcInv.clmCustomerPrice"),dataType:"number",format:"â‚¬#,##0.000",width:70,allowHeaderFiltering:!1,allowEditing:!1}),T.createElement(L.sg,{dataField:"DIFF_PRICE",caption:this.t("grdPurcInv.clmDiffPrice"),dataType:"number",format:"â‚¬#,##0.000",width:70,allowHeaderFiltering:!1,allowEditing:!1}),T.createElement(L.sg,{dataField:"AMOUNT",caption:this.t("grdPurcInv.clmAmount"),format:{style:"currency",currency:"EUR",precision:2},allowEditing:!1,width:90,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"DISCOUNT",caption:this.t("grdPurcInv.clmDiscount"),dataType:"number",format:{style:"currency",currency:"EUR",precision:2},width:60,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"DISCOUNT_RATE",caption:this.t("grdPurcInv.clmDiscountRate"),dataType:"number",width:60,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"VAT",caption:this.t("grdPurcInv.clmVat"),format:"â‚¬#,##0.000",allowEditing:!1,width:75,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"VAT_RATE",caption:this.t("grdPurcInv.clmVat"),format:"%#,##",allowEditing:!1,width:50,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"TOTAL",caption:this.t("grdPurcInv.clmTotal"),format:{style:"currency",currency:"EUR",precision:2},allowEditing:!1,width:110,allowHeaderFiltering:!1}),T.createElement(L.sg,{dataField:"CONNECT_REF",caption:this.t("grdPurcInv.clmDispatch"),width:110,allowEditing:!1}),T.createElement(L.sg,{dataField:"DESCRIPTION",caption:this.t("grdPurcInv.clmDescription"),width:100,headerFilter:{visible:!0}})),T.createElement(w(),{dataSource:this.rightItems,width:200,target:"#grdPurcInv",onItemClick:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.itemData.text!=o.t("getDispatch")){t.next=4;break}o._getDispatch(),t.next=11;break;case 4:if(e.itemData.text!=o.t("getPayment")){t.next=10;break}return t.next=7,o._getPayment();case 7:o.popPayment.show(),t.next=11;break;case 10:e.itemData.text==o.t("getOrders")&&o._getOrders();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this)})))))),T.createElement("div",{className:"row px-2 pt-2"},T.createElement("div",{className:"col-12"},T.createElement(R(),{height:"100%",onItemRendered:this._onItemRendered},T.createElement(x.Item,{title:this.t("tabTitleSubtotal")},T.createElement("div",{className:"row px-2 pt-2"},T.createElement("div",{className:"col-12"},T.createElement(v(),{colCount:4,parent:this,id:"frmPurcInv"+this.tabIndex},T.createElement(x.EmptyItem,{colSpan:2}),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtDiffrentPositive"),alignment:"right"}),T.createElement(A.ZP,{id:"txtDiffrentPositive",parent:this,simple:!0,readOnly:!0,maxLength:32,button:[{id:"01",icon:"print",onClick:(n=(0,s.Z)(h().mark((function t(){var e,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={query:"SELECT *,ISNULL((SELECT TOP 1 PATH FROM LABEL_DESIGN WHERE TAG = 40),'') AS PATH FROM  [dbo].[FN_DOC_ITEMS_FOR_PRINT](@DOC_GUID) WHERE DIFF_PRICE > 0 ORDER BY LINE_NO ",param:["DOC_GUID:string|50","DESIGN:string|25"],value:[o.docObj.dt()[0].GUID,o.cmbDesignList.value]},t.next=3,o.core.sql.execute(e);case 3:n=t.sent,console.log(JSON.stringify(n.result.recordset)),o.core.socket.emit("devprint","{TYPE:'REVIEW',PATH:'"+n.result.recordset[0].PATH.replaceAll("\\","/")+"',DATA:"+JSON.stringify(n.result.recordset)+"}",(function(t){if("ERR"!=t.split("|")[0]){var e=window.open("printview.html","_blank","width=900,height=1000,left=500");e.onload=function(){e.document.getElementById("view").innerHTML="<iframe src='data:application/pdf;base64,"+t.split("|")[1]+"' type='application/pdf' width='100%' height='100%'></iframe>"}}}));case 6:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}]})),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtAmount"),alignment:"right"}),T.createElement(A.ZP,{id:"txtAmount",parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC"),field:"AMOUNT"},maxLength:32})),T.createElement(x.EmptyItem,{colSpan:2}),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtDiffrentNegative"),alignment:"right"}),T.createElement(A.ZP,{id:"txtDiffrentNegative",parent:this,simple:!0,readOnly:!0,maxLength:32})),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtDiscount"),alignment:"right"}),T.createElement(A.ZP,{id:"txtDiscount",parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC"),field:"DISCOUNT"},maxLength:32,button:[{id:"01",icon:"more",onClick:function(){o.docObj.dt()[0].DISCOUNT>0&&(o.txtDiscountPercent.value=parseFloat((100-(o.docObj.dt()[0].AMOUNT-o.docObj.dt()[0].DISCOUNT)/o.docObj.dt()[0].AMOUNT*100).toFixed(3)),o.txtDiscountPrice.value=o.docObj.dt()[0].DISCOUNT),o.popDiscount.show()}}]})),T.createElement(x.EmptyItem,{colSpan:2}),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtDiffrentTotal"),alignment:"right"}),T.createElement(A.ZP,{id:"txtDiffrentTotal",parent:this,simple:!0,readOnly:!0,maxLength:32})),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtVat"),alignment:"right"}),T.createElement(A.ZP,{id:"txtVat",parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC"),field:"VAT"},maxLength:32,button:[{id:"01",icon:"clear",onClick:(e=(0,s.Z)(h().mark((function t(){var e,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:"msgVatDelete",showTitle:!0,title:o.t("msgVatDelete.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgVatDelete.btn01"),location:"before"},{id:"btn02",caption:o.t("msgSave.btn02"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgVatDelete.msg"))},t.next=3,(0,B.W)(e);case 3:if("btn01"==t.sent)for(n=0;n<o.docObj.docItems.dt().length;n++)o.docObj.docItems.dt()[n].VAT=0,o.docObj.docItems.dt()[n].VAT_RATE=0,o.docObj.docItems.dt()[n].TOTAL=o.docObj.docItems.dt()[n].PRICE*o.docObj.docItems.dt()[n].QUANTITY-o.docObj.docItems.dt()[n].DISCOUNT,o._calculateTotal();case 5:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}]})),T.createElement(x.EmptyItem,{colSpan:2}),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtDiffrentInv"),alignment:"right"}),T.createElement(A.ZP,{id:"txtDiffrentInv",parent:this,simple:!0,readOnly:!0,maxLength:32})),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtTotal"),alignment:"right"}),T.createElement(A.ZP,{id:"txtTotal",parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC"),field:"TOTAL"},maxLength:32})))))),T.createElement(x.Item,{title:this.t("tabTitlePayments")},T.createElement("div",{className:"row px-2 pt-2"},T.createElement("div",{className:"col-12"},T.createElement(v(),{colCount:4,parent:this,id:"frmPurcInv"+this.tabIndex},T.createElement(x.EmptyItem,{colSpan:3}),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtPayTotal"),alignment:"right"}),T.createElement(A.ZP,{id:"txtPayTotal",format:{style:"currency",currency:"EUR",precision:2},parent:this,simple:!0,readOnly:!0,dt:{data:this.paymentObj.dt("DOC"),field:"TOTAL"},maxLength:32})),T.createElement(x.EmptyItem,{colSpan:3}),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtRemainder"),alignment:"right"}),T.createElement(A.ZP,{id:"txtRemainder",format:{style:"currency",currency:"EUR",precision:2},parent:this,simple:!0,readOnly:!0,maxLength:32})),T.createElement(x.EmptyItem,{colSpan:3}),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtbalance"),alignment:"right"}),T.createElement(A.ZP,{id:"txtbalance",format:{style:"currency",currency:"EUR",precision:2},parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC_CUSTOMER"),field:"OUTPUT_BALANCE"},maxLength:32})),T.createElement(x.EmptyItem,{colSpan:3}),T.createElement(x.Item,null,T.createElement("div",{className:"row"},T.createElement("div",{className:"col-12"},T.createElement(V.Z,{text:this.t("getPayment"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o._getPayment();case 2:o.popPayment.show();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}))))))))))),T.createElement("div",null,T.createElement(F.ZP,{parent:this,id:"popDiscount",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popDiscount.title"),container:"#root",width:"500",height:"250",position:{of:"#root"}},T.createElement(v(),{colCount:1,height:"fit-content"},T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("popDiscount.Percent"),alignment:"right"}),T.createElement(S.ZP,{id:"txtDiscountPercent",parent:this,simple:!0,maxLength:32,onValueChanged:(0,s.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o.txtDiscountPercent.value>100)){t.next=7;break}return e={id:"msgDiscountPercent",showTitle:!0,title:o.t("msgDiscountPercent.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgDiscountPercent.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgDiscountPercent.msg"))},t.next=4,(0,B.W)(e);case 4:return o.txtDiscountPercent.value=0,o.txtDiscountPrice.value=0,t.abrupt("return");case 7:o.txtDiscountPrice.value=parseFloat((o.docObj.dt()[0].AMOUNT*o.txtDiscountPercent.value/100).toFixed(3));case 8:case"end":return t.stop()}}),t)}))).bind(this)})),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("popDiscount.Price"),alignment:"right"}),T.createElement(S.ZP,{id:"txtDiscountPrice",parent:this,simple:!0,maxLength:32,onValueChanged:(0,s.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o.txtDiscountPrice.value>o.docObj.dt()[0].AMOUNT)){t.next=7;break}return e={id:"msgDiscountPrice",showTitle:!0,title:o.t("msgDiscountPrice.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgDiscountPrice.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgDiscountPrice.msg"))},t.next=4,(0,B.W)(e);case 4:return o.txtDiscountPercent.value=0,o.txtDiscountPrice.value=0,t.abrupt("return");case 7:o.txtDiscountPercent.value=parseFloat((100-(o.docObj.dt()[0].AMOUNT-o.txtDiscountPrice.value)/o.docObj.dt()[0].AMOUNT*100).toFixed(3));case 8:case"end":return t.stop()}}),t)}))).bind(this)})),T.createElement(x.Item,null,T.createElement("div",{className:"row"},T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.lang.t("btnSave"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,s.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=0;e<o.docObj.docItems.dt().length;e++)o.docObj.docItems.dt()[e].DISCOUNT_RATE=o.txtDiscountPercent.value,o.docObj.docItems.dt()[e].DISCOUNT=parseFloat((o.docObj.docItems.dt()[e].PRICE*o.docObj.docItems.dt()[e].QUANTITY*o.txtDiscountPercent.value/100).toFixed(3)),o.docObj.docItems.dt()[e].VAT>0&&(o.docObj.docItems.dt()[e].VAT=parseFloat(((o.docObj.docItems.dt()[e].PRICE*o.docObj.docItems.dt()[e].QUANTITY-o.docObj.docItems.dt()[e].DISCOUNT)*(o.docObj.docItems.dt()[e].VAT_RATE/100)).toFixed(3))),o.docObj.docItems.dt()[e].TOTAL=parseFloat((o.docObj.docItems.dt()[e].PRICE*o.docObj.docItems.dt()[e].QUANTITY+o.docObj.docItems.dt()[e].VAT-o.docObj.docItems.dt()[e].DISCOUNT).toFixed(3));o._calculateTotal(),o.popDiscount.hide();case 3:case"end":return t.stop()}}),t)})))})),T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){o.popDiscount.hide()}}))))))),T.createElement("div",null,T.createElement(F.ZP,{parent:this,id:"popPassword",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popPassword.title"),container:"#root",width:"500",height:"200",position:{of:"#root"}},T.createElement(v(),{colCount:1,height:"fit-content"},T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("popPassword.Password"),alignment:"right"}),T.createElement(A.ZP,{id:"txtPassword",mode:"password",parent:this,simple:!0,maxLength:32})),T.createElement(x.Item,null,T.createElement("div",{className:"row"},T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.t("popPassword.btnApprove"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,s.Z)(h().mark((function t(){var e,n,a,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=btoa(o.txtPassword.value),n={query:"SELECT TOP 1 * FROM USERS WHERE PWD = @PWD AND ROLE = 'Administrator' AND STATUS = 1",param:["PWD:string|50"],value:[e]},t.next=4,o.core.sql.execute(n);case 4:if(!(t.sent.result.recordset.length>0)){t.next=15;break}return o.docObj.dt()[0].LOCKED=0,o.frmDocItems.option("disabled",!1),o.docLocked=!1,a={id:"msgPasswordSucces",showTitle:!0,title:o.t("msgPasswordSucces.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgPasswordSucces.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgPasswordSucces.msg"))},t.next=12,(0,B.W)(a);case 12:o.popPassword.hide(),t.next=18;break;case 15:return i={id:"msgPasswordWrong",showTitle:!0,title:o.t("msgPasswordWrong.title"),showCloseButton:!0,width:"500px",height:"200px",button:[{id:"btn01",caption:o.t("msgPasswordWrong.btn01"),location:"after"}],content:T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},o.t("msgPasswordWrong.msg"))},t.next=18,(0,B.W)(i);case 18:case"end":return t.stop()}}),t)})))})),T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){o.popPassword.hide()}}))))))),T.createElement(k.Z,{id:"pg_dispatchGrid",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",selection:{mode:"multiple"},title:this.t("pg_dispatchGrid.title")},T.createElement(L.sg,{dataField:"REFERANS",caption:this.t("pg_dispatchGrid.clmReferans"),width:200,defaultSortOrder:"asc"}),T.createElement(L.sg,{dataField:"ITEM_CODE",caption:this.t("pg_dispatchGrid.clmCode"),width:200}),T.createElement(L.sg,{dataField:"ITEM_NAME",caption:this.t("pg_dispatchGrid.clmName"),width:450}),T.createElement(L.sg,{dataField:"QUANTITY",caption:this.t("pg_dispatchGrid.clmQuantity"),width:200}),T.createElement(L.sg,{dataField:"PRICE",caption:this.t("pg_dispatchGrid.clmPrice"),width:200}),T.createElement(L.sg,{dataField:"TOTAL",caption:this.t("pg_dispatchGrid.clmTotal"),width:200})),T.createElement(k.Z,{id:"pg_txtItemsCode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtItemsCode.title"),search:!0},T.createElement(L.sg,{dataField:"CODE",caption:this.t("pg_txtItemsCode.clmCode"),width:200}),T.createElement(L.sg,{dataField:"NAME",caption:this.t("pg_txtItemsCode.clmName"),width:300,defaultSortOrder:"asc"}),T.createElement(L.sg,{dataField:"MULTICODE",caption:this.t("pg_txtItemsCode.clmMulticode"),width:200})),T.createElement(k.Z,{id:"pg_service",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_service.title"),data:{source:{select:{query:"SELECT *,1 AS ITEM_TYPE FROM SERVICE_ITEMS WHERE STATUS = 1"},sql:this.core.sql}}},T.createElement(L.sg,{dataField:"CODE",caption:this.t("pg_service.clmCode"),width:200}),T.createElement(L.sg,{dataField:"NAME",caption:this.t("pg_service.clmName"),width:300,defaultSortOrder:"asc"})),T.createElement("div",null,T.createElement(F.ZP,{parent:this,id:"popPayment",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popPayment.title"),container:"#root",width:"800",height:"800",position:{of:"#root"}},T.createElement(v(),{colCount:3,height:"fit-content"},T.createElement(x.Item,{location:"after"},T.createElement(y.Button,{icon:"add",text:this.t("btnCash"),validationGroup:"frmPurcInv"+this.tabIndex,onClick:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.numCash.setState({value:0}),o.cashDescription.setState({value:""}),o.popCash.show();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}))),T.createElement(L.ZP,{parent:this,id:"grdInvoicePayment",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,headerFilter:{visible:!0},height:"75%",width:"100%",dbApply:!1,onRowRemoved:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.popPayment.hide(),o.paymentObj.dt()[0].AMOUNT=o.paymentObj.docCustomer.dt().sum("AMOUNT",2),o.paymentObj.dt()[0].TOTAL=o.paymentObj.docCustomer.dt().sum("AMOUNT",2),o.paymentObj.save(),t.next=6,o._getPayment();case 6:o.popPayment.show();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T.createElement(L.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),T.createElement(L.PY,{mode:"standart"}),T.createElement(L.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!0}),T.createElement(L.sg,{dataField:"CDATE_FORMAT",caption:this.t("grdInvoicePayment.clmCreateDate"),width:150,allowEditing:!1,headerFilter:{visible:!0}}),T.createElement(L.sg,{dataField:"AMOUNT",caption:this.t("grdInvoicePayment.clmPrice"),width:150,headerFilter:{visible:!0}}),T.createElement(L.sg,{dataField:"OUTPUT_NAME",caption:this.t("grdInvoicePayment.clmInputName"),width:150,headerFilter:{visible:!0}}),T.createElement(L.sg,{dataField:"PAY_TYPE_NAME",caption:this.t("grdInvoicePayment.clmTypeName"),width:150,headerFilter:{visible:!0}})),T.createElement("div",{className:"row px-2 pt-2"},T.createElement("div",{className:"col-12"},T.createElement(v(),{colCount:2,parent:this},T.createElement(x.EmptyItem,null),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtPayInvoÄ±ceTotal"),alignment:"right"}),T.createElement(A.ZP,{id:"txtPayInvoÄ±ceTotal",parent:this,simple:!0,readOnly:!0,dt:{data:this.docObj.dt("DOC"),field:"TOTAL"},maxLength:32})),T.createElement(x.EmptyItem,null),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtPayTotal"),alignment:"right"}),T.createElement(A.ZP,{id:"txtPayTotal",parent:this,simple:!0,readOnly:!0,dt:{data:this.paymentObj.dt("DOC"),field:"TOTAL"},maxLength:32})),T.createElement(x.EmptyItem,null),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtRemainder"),alignment:"right"}),T.createElement(A.ZP,{id:"txtMainRemainder",parent:this,simple:!0,readOnly:!0,maxLength:32}))))))),T.createElement("div",null,T.createElement(F.ZP,{parent:this,id:"popCash",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popCash.title"),container:"#root",width:"500",height:"400",position:{of:"#root"}},T.createElement(v(),{colCount:1,height:"fit-content"},T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("cmbPayType.title"),alignment:"right"}),T.createElement(M.ZP,{simple:!0,parent:this,id:"cmbPayType",displayExpr:"VALUE",valueExpr:"ID",value:"",searchEnabled:!0,notRefresh:!0,onValueChanged:function(){var t=(0,s.Z)(h().mark((function t(e){var n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.cmbCashSafe.value="",0==e.value?n={query:"SELECT * FROM SAFE_VW_01 WHERE TYPE = 0"}:1==e.value?n={query:"SELECT * FROM SAFE_VW_01 WHERE TYPE = 1"}:2==e.value||3==e.value?n={query:"SELECT * FROM BANK_VW_01 WHERE TYPE = 0"}:(4==e.value||5==e.value)&&(n={query:"SELECT * FROM SAFE_VW_01 WHERE TYPE = 0"}),t.next=4,o.core.sql.execute(n);case 4:(a=t.sent).result.recordset.length>0?o.cmbCashSafe.setData(a.result.recordset):o.cmbCashSafe.setData([]);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this),data:{source:[{ID:0,VALUE:this.t("cmbPayType.cash")},{ID:1,VALUE:this.t("cmbPayType.check")},{ID:2,VALUE:this.t("cmbPayType.bankTransfer")},{ID:3,VALUE:this.t("cmbPayType.otoTransfer")},{ID:4,VALUE:this.t("cmbPayType.foodTicket")},{ID:5,VALUE:this.t("cmbPayType.bill")}]},param:this.param.filter({ELEMENT:"cmbCashSafe",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbCashSafe",USERS:this.user.CODE})},T.createElement(A.cX,{validationGroup:"frmPayCash"+this.tabIndex},T.createElement(A.n2,{message:this.t("ValidCash")})))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("cmbCashSafe"),alignment:"right"}),T.createElement(M.ZP,{simple:!0,parent:this,id:"cmbCashSafe",displayExpr:"NAME",valueExpr:"GUID",value:"",searchEnabled:!0,notRefresh:!0,onValueChanged:(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),param:this.param.filter({ELEMENT:"cmbCashSafe",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbCashSafe",USERS:this.user.CODE})},T.createElement(A.cX,{validationGroup:"frmPayCash"+this.tabIndex},T.createElement(A.n2,{message:this.t("ValidCash")})))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("cash"),alignment:"right"}),T.createElement("div",{className:"row"},T.createElement("div",{className:"col-4 pe-0"},T.createElement(S.ZP,{id:"numCash",parent:this,simple:!0,maxLength:32,param:this.param.filter({ELEMENT:"numCash",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"numCash",USERS:this.user.CODE})},T.createElement(A.cX,{validationGroup:"frmPayCash"+this.tabIndex},T.createElement(A.n2,{message:this.t("ValidCash")})))),T.createElement("div",{className:"col-6 pe-0"},T.createElement(y.Button,{icon:"revert",text:this.t("getRemainder"),onClick:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.numCash.value=o.txtRemainder.value;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("description"),alignment:"right"}),T.createElement("div",{className:"col-12 pe-0"},T.createElement(A.ZP,{id:"cashDescription",parent:this,simple:!0,width:500,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,param:this.param.filter({ELEMENT:"cashDescription",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cashDescription",USERS:this.user.CODE})}))),T.createElement(x.Item,null,T.createElement("div",{className:"row"},T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.t("popCash.btnApprove"),type:"normal",stylingMode:"contained",width:"100%",validationGroup:"frmPayCash"+this.tabIndex,onClick:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"valid"==e.validationGroup.validate().status&&(1==o.cmbPayType.value?o.popCheck.show():(o._addPayment(o.cmbPayType.value,o.numCash.value),o.popCash.hide()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){o.popCash.hide()}}))))))),T.createElement("div",null,T.createElement(F.ZP,{parent:this,id:"popCheck",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popCheck.title"),container:"#root",width:"500",height:"500",position:{of:"#root"}},T.createElement(v(),{colCount:1,height:"fit-content"},T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("checkReference"),alignment:"right"}),T.createElement("div",{className:"col-12 pe-0"},T.createElement(A.ZP,{id:"checkReference",parent:this,simple:!0,width:500,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value,maxLength:32,param:this.param.filter({ELEMENT:"checkReference",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"checkReference",USERS:this.user.CODE})}))),T.createElement(x.Item,null,T.createElement("div",{className:"row"},T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.t("popCheck.btnApprove"),type:"normal",stylingMode:"contained",width:"100%",validationGroup:"frmCollCheck"+this.tabIndex,onClick:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o._addPayment(1,o.numCash.value),o.popCheck.hide(),o.popCash.hide();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){o.popCheck.hide()}}))))))),T.createElement("div",null,T.createElement(F.ZP,{parent:this,id:"popDesign",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popDesign.title"),container:"#root",width:"500",height:"250",position:{of:"#root"}},T.createElement(v(),{colCount:1,height:"fit-content"},T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("popDesign.design"),alignment:"right"}),T.createElement(M.ZP,{simple:!0,parent:this,id:"cmbDesignList",notRefresh:!0,displayExpr:"DESIGN_NAME",valueExpr:"TAG",value:"",searchEnabled:!0,onValueChanged:(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),data:{source:{select:{query:"SELECT TAG,DESIGN_NAME FROM [dbo].[LABEL_DESIGN] WHERE PAGE = '14'"},sql:this.core.sql}},param:this.param.filter({ELEMENT:"cmbDesignList",USERS:this.user.CODE}),access:this.access.filter({ELEMENT:"cmbDesignList",USERS:this.user.CODE})},T.createElement(A.cX,{validationGroup:"frmPurcOrderPrint"+this.tabIndex},T.createElement(A.n2,{message:this.t("validDesign")})))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("popDesign.lang"),alignment:"right"}),T.createElement(M.ZP,{simple:!0,parent:this,id:"cmbDesignLang",notRefresh:!0,displayExpr:"VALUE",valueExpr:"ID",value:"",searchEnabled:!0,onValueChanged:(0,s.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))).bind(this),data:{source:[{ID:"FR",VALUE:"FR"},{ID:"TR",VALUE:"TR"}]}})),T.createElement(x.Item,null,T.createElement("div",{className:"row"},T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.lang.t("btnPrint"),type:"normal",stylingMode:"contained",width:"100%",onClick:(0,s.Z)(h().mark((function t(){var e,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={query:"SELECT *,ISNULL((SELECT TOP 1 PATH FROM LABEL_DESIGN WHERE TAG = @DESIGN),'') AS PATH FROM  [dbo].[FN_DOC_ITEMS_FOR_PRINT](@DOC_GUID) ORDER BY LINE_NO ",param:["DOC_GUID:string|50","DESIGN:string|25"],value:[o.docObj.dt()[0].GUID,o.cmbDesignList.value]},t.next=3,o.core.sql.execute(e);case 3:n=t.sent,console.log(JSON.stringify(n.result.recordset)),o.core.socket.emit("devprint","{TYPE:'REVIEW',PATH:'"+n.result.recordset[0].PATH.replaceAll("\\","/")+"',DATA:"+JSON.stringify(n.result.recordset)+"}",(function(t){if("ERR"!=t.split("|")[0]){var e=window.open("printview.html","_blank","width=900,height=1000,left=500");e.onload=function(){e.document.getElementById("view").innerHTML="<iframe src='data:application/pdf;base64,"+t.split("|")[1]+"' type='application/pdf' width='100%' height='100%'></iframe>"}}})),o.popDesign.hide();case 7:case"end":return t.stop()}}),t)})))})),T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.lang.t("btnCancel"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){o.popDesign.hide()}}))))))),T.createElement("div",null,T.createElement(F.ZP,{parent:this,id:"popMultiItem",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popMultiItem.title"),container:"#root",width:"1100",height:"900",position:{of:"#root"}},T.createElement(v(),{colCount:2,height:"fit-content"},T.createElement(x.Item,{colSpan:2},T.createElement(x.Label,{alignment:"right"}),T.createElement(G.ZP,{id:"tagItemCode",parent:this,simple:!0,value:[],placeholder:this.t("tagItemCodePlaceholder")})),T.createElement(x.EmptyItem,null),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("cmbMultiItemType.title"),alignment:"right"}),T.createElement(M.ZP,{simple:!0,parent:this,id:"cmbMultiItemType",height:"fit-content",displayExpr:"VALUE",valueExpr:"ID",value:0,data:{source:[{ID:0,VALUE:this.t("cmbMultiItemType.customerCode")},{ID:1,VALUE:this.t("cmbMultiItemType.ItemCode")}]}})),T.createElement(x.EmptyItem,null),T.createElement(x.Item,null,T.createElement("div",{className:"row"},T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.t("popMultiItem.btnApprove"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.multiItemAdd();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.t("popMultiItem.btnClear"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){o.multiItemData.clear()}})))),T.createElement(x.Item,{colSpan:2},T.createElement(L.ZP,{parent:this,id:"grdMultiItem",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,headerFilter:{visible:!0},filterRow:{visible:!0},height:600,width:"100%",dbApply:!1,onRowRemoved:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T.createElement(L.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),T.createElement(L.PY,{mode:"standart"}),T.createElement(L.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0}),T.createElement(L.sg,{dataField:"CODE",caption:this.t("grdMultiItem.clmCode"),width:150,allowEditing:!1}),T.createElement(L.sg,{dataField:"MULTICODE",caption:this.t("grdMultiItem.clmMulticode"),width:150,allowEditing:!1}),T.createElement(L.sg,{dataField:"NAME",caption:this.t("grdMultiItem.clmName"),width:300,headerFilter:{visible:!0},allowEditing:!1}),T.createElement(L.sg,{dataField:"QUANTITY",caption:this.t("grdMultiItem.clmQuantity"),dataType:"number",width:100,headerFilter:{visible:!0}}))),T.createElement(x.EmptyItem,null),T.createElement(x.Item,null,T.createElement("div",{className:"row"},T.createElement("div",{className:"col-6"}),T.createElement("div",{className:"col-6"},T.createElement(V.Z,{text:this.t("popMultiItem.btnSave"),type:"normal",stylingMode:"contained",width:"100%",onClick:function(){o.multiItemSave()}}))))))),T.createElement("div",null,T.createElement(F.ZP,{parent:this,id:"popDetail",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popDetail.title"),container:"#root",width:"500",height:"250",position:{of:"#root"}},T.createElement(v(),{colCount:1,height:"fit-content"},T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("popDetail.count"),alignment:"right"}),T.createElement(S.ZP,{id:"numDetailCount",parent:this,simple:!0,readOnly:!0,maxLength:32})),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("popDetail.quantity"),alignment:"right"}),T.createElement(S.ZP,{id:"numDetailQuantity",parent:this,simple:!0,readOnly:!0,maxLength:32})),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("popDetail.quantity2"),alignment:"right"}),T.createElement(A.ZP,{id:"numDetailQuantity2",parent:this,simple:!0,readOnly:!0,maxLength:32,button:[{id:"01",icon:"more",onClick:(t=(0,s.Z)(h().mark((function t(){var e,n,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={query:"SELECT NAME,ROUND(SUM(UNIT_FACTOR * QUANTITY),2) AS UNIT_FACTOR FROM ( SELECT ITEM_CODE,QUANTITY, (SELECT TOP 1 NAME FROM ITEM_UNIT_VW_01 WHERE ITEM_GUID= ITEM AND TYPE = 1 ) AS NAME, (SELECT TOP 1 FACTOR FROM ITEM_UNIT_VW_01 WHERE ITEM_GUID= ITEM AND TYPE = 1 ) AS UNIT_FACTOR FROM DOC_ITEMS_VW_01 WHERE DOC_GUID = @DOC_GUID OR INVOICE_GUID = @DOC_GUID ) AS TMP GROUP BY NAME ",param:["DOC_GUID:string|50"],value:[o.docObj.dt()[0].GUID]},t.next=3,o.core.sql.execute(e);case 3:if(n=t.sent,o.unitDetailData.clear(),n.result.recordset.length>0){for(a=0;a<n.result.recordset.length;a++)o.unitDetailData.push(n.result.recordset[a]);o.popUnit2.show()}case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}]}))))),T.createElement("div",null,T.createElement(F.ZP,{parent:this,id:"popUnit2",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popUnit2.title"),container:"#root",width:"500",height:"250",position:{of:"#root"}},T.createElement(v(),{colCount:1,height:"fit-content"},T.createElement(x.Item,null,T.createElement(L.ZP,{parent:this,id:"grdUnit2",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,height:"100%",width:"100%",dbApply:!1,onRowRemoved:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T.createElement(L.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),T.createElement(L.PY,{mode:"standart"}),T.createElement(L.LO,{mode:"cell",allowUpdating:!0,allowDeleting:!0}),T.createElement(L.sg,{dataField:"NAME",caption:this.t("grdUnit2.clmName"),width:120,headerFilter:{visible:!0},allowEditing:!1}),T.createElement(L.sg,{dataField:"UNIT_FACTOR",caption:this.t("grdUnit2.clmQuantity"),dataType:"number",width:120,headerFilter:{visible:!0}})))))),T.createElement(B.Z,{id:"msgCustomerNotFound",container:"#root",parent:this,position:{of:"#root"},showTitle:!0,title:this.t("msgCustomerNotFound.title"),showCloseButton:!1,width:"500px",height:"250px",button:[{id:"btn01",caption:this.t("msgCustomerNotFound.btn01"),location:"before"},{id:"btn02",caption:this.t("msgCustomerNotFound.btn02"),location:"after"}]},T.createElement("div",{className:"row"},T.createElement("div",{className:"col-12 py-2"},T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgCustomerNotFound.msg"))),T.createElement("div",{className:"col-12 py-2"},T.createElement(v(),null,T.createElement(x.Item,null,T.createElement(x.Label,{text:this.lang.t("checkAll"),alignment:"right"}),T.createElement(j.ZP,{id:"checkCustomer",parent:this,simple:!0,value:!1}))))),T.createElement("div",{className:"row"})),T.createElement(B.Z,{id:"msgCombineItem",container:"#root",parent:this,position:{of:"#root"},showTitle:!0,title:this.t("msgCombineItem.title"),showCloseButton:!1,width:"500px",height:"250px",button:[{id:"btn01",caption:this.t("msgCombineItem.btn01"),location:"before"},{id:"btn02",caption:this.t("msgCombineItem.btn02"),location:"after"}]},T.createElement("div",{className:"row"},T.createElement("div",{className:"col-12 py-2"},T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgCombineItem.msg"))),T.createElement("div",{className:"col-12 py-2"},T.createElement(v(),null,T.createElement(x.Item,null,T.createElement(x.Label,{text:this.lang.t("checkAll"),alignment:"right"}),T.createElement(j.ZP,{id:"checkCombine",parent:this,simple:!0,value:!1}))))),T.createElement("div",{className:"row"})),T.createElement(B.Z,{id:"msgNewPrice",container:"#root",parent:this,position:{of:"#root"},showTitle:!0,title:this.t("msgNewPrice.title"),showCloseButton:!1,width:"1000px",height:"800PX",button:[{id:"btn01",caption:this.t("msgNewPrice.btn01"),location:"before"},{id:"btn02",caption:this.t("msgNewPrice.btn02"),location:"after"}]},T.createElement("div",{className:"row"},T.createElement("div",{className:"col-12 py-2"},T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgNewPrice.msg"))),T.createElement("div",{className:"col-12 py-2"},T.createElement(v(),null,T.createElement(x.Item,null,T.createElement(L.ZP,{parent:this,id:"grdNewPrice",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,headerFilter:{visible:!0},filterRow:{visible:!0},height:600,width:"100%",dbApply:!1,selection:{mode:"multiple"},onRowRemoved:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T.createElement(L.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),T.createElement(L.PY,{mode:"standart"}),T.createElement(L.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),T.createElement(L.sg,{dataField:"ITEM_CODE",caption:this.t("grdNewPrice.clmCode"),width:150}),T.createElement(L.sg,{dataField:"ITEM_NAME",caption:this.t("grdNewPrice.clmName"),width:250}),T.createElement(L.sg,{dataField:"CUSTOMER_PRICE",caption:this.t("grdNewPrice.clmPrice"),width:130}),T.createElement(L.sg,{dataField:"PRICE",caption:this.t("grdNewPrice.clmPrice2"),dataType:"number",width:80})))))),T.createElement("div",{className:"row"})),T.createElement(B.Z,{id:"msgNewVat",container:"#root",parent:this,position:{of:"#root"},showTitle:!0,title:this.t("msgNewVat.title"),showCloseButton:!1,width:"800px",height:"600PX",button:[{id:"btn01",caption:this.t("msgNewVat.btn01"),location:"before"},{id:"btn02",caption:this.t("msgNewVat.btn02"),location:"after"}]},T.createElement("div",{className:"row"},T.createElement("div",{className:"col-12 py-2"},T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgNewVat.msg"))),T.createElement("div",{className:"col-12 py-2"},T.createElement(v(),null,T.createElement(x.Item,null,T.createElement(L.ZP,{parent:this,id:"grdNewVat",showBorders:!0,columnsAutoWidth:!0,allowColumnReordering:!0,allowColumnResizing:!0,headerFilter:{visible:!0},filterRow:{visible:!0},height:400,width:"100%",dbApply:!1,selection:{mode:"multiple"},onRowRemoved:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T.createElement(L.m_,{editOnKeyPress:!0,enterKeyAction:"moveFocus",enterKeyDirection:"column"}),T.createElement(L.PY,{mode:"standart"}),T.createElement(L.LO,{mode:"cell",allowUpdating:!1,allowDeleting:!1}),T.createElement(L.sg,{dataField:"ITEM_CODE",caption:this.t("grdNewVat.clmCode"),width:150}),T.createElement(L.sg,{dataField:"ITEM_NAME",caption:this.t("grdNewVat.clmName"),width:250}),T.createElement(L.sg,{dataField:"OLD_VAT",caption:this.t("grdNewVat.clmVat"),width:130}),T.createElement(L.sg,{dataField:"VAT_RATE",caption:this.t("grdNewVat.clmVat2"),dataType:"number",width:80})))))),T.createElement("div",{className:"row"})),T.createElement(B.Z,{id:"msgQuantity",container:"#root",parent:this,position:{of:"#root"},showTitle:!0,title:this.t("msgQuantity.title"),showCloseButton:!1,width:"350px",height:"250px",button:[{id:"btn01",caption:this.t("msgQuantity.btn01"),location:"after"}]},T.createElement("div",{className:"row"},T.createElement("div",{className:"col-12 py-2"},T.createElement("div",{style:{textAlign:"center",fontSize:"20px"}},this.t("msgQuantity.msg"))),T.createElement("div",{className:"col-12 py-2"},T.createElement(v(),null,T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("txtQuantity"),alignment:"right"}),T.createElement(S.ZP,{id:"txtPopQuantity",parent:this,simple:!0,onEnterKey:function(){var t=(0,s.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.msgQuantity._onClick();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(this)}))))),T.createElement("div",{className:"row"})),T.createElement(k.Z,{id:"pg_txtBarcode",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_txtBarcode.title"),search:!0},T.createElement(L.sg,{dataField:"BARCODE",caption:this.t("pg_txtBarcode.clmBarcode"),width:150}),T.createElement(L.sg,{dataField:"CODE",caption:this.t("pg_txtBarcode.clmCode"),width:150}),T.createElement(L.sg,{dataField:"NAME",caption:this.t("pg_txtBarcode.clmName"),width:300,defaultSortOrder:"asc"}),T.createElement(L.sg,{dataField:"MULTICODE",caption:this.t("pg_txtBarcode.clmMulticode"),width:200})),T.createElement(k.Z,{id:"pg_ordersGrid",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",selection:{mode:"multiple"},title:this.t("pg_ordersGrid.title")},T.createElement(L.Po,{defaultPageSize:22}),T.createElement(L.sg,{dataField:"REFERANS",caption:this.t("pg_ordersGrid.clmReferans"),width:200,defaultSortOrder:"asc"}),T.createElement(L.sg,{dataField:"ITEM_CODE",caption:this.t("pg_ordersGrid.clmCode"),width:200}),T.createElement(L.sg,{dataField:"ITEM_NAME",caption:this.t("pg_ordersGrid.clmName"),width:500}),T.createElement(L.sg,{dataField:"QUANTITY",caption:this.t("pg_ordersGrid.clmQuantity"),width:200}),T.createElement(L.sg,{dataField:"PRICE",caption:this.t("pg_ordersGrid.clmPrice"),width:200,format:{style:"currency",currency:"EUR",precision:2}}),T.createElement(L.sg,{dataField:"TOTAL",caption:this.t("pg_ordersGrid.clmTotal"),width:200,format:{style:"currency",currency:"EUR",precision:2}})),T.createElement("div",null,T.createElement(F.ZP,{parent:this,id:"popExcel",visible:!1,showCloseButton:!0,showTitle:!0,title:this.t("popExcel.title"),container:"#root",width:"600",height:"450",position:{of:"#root"}},T.createElement(v(),{colCount:1,height:"fit-content"},T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("grdPurcInv.clmItemCode"),alignment:"right"}),T.createElement(A.ZP,{id:"txtPopExcelCode",parent:this,simple:!0,notRefresh:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value},T.createElement(A.cX,{validationGroup:"frmInvExcel"+this.tabIndex},T.createElement(A.n2,{message:this.t("validExcel")})))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("grdPurcInv.clmQuantity"),alignment:"right"}),T.createElement(A.ZP,{id:"txtPopExcelQty",parent:this,simple:!0,notRefresh:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value},T.createElement(A.cX,{validationGroup:"frmInvExcel"+this.tabIndex},T.createElement(A.n2,{message:this.t("validExcel")})))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("grdPurcInv.clmPrice"),alignment:"right"}),T.createElement(A.ZP,{id:"txtPopExcelPrice",parent:this,simple:!0,notRefresh:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value},T.createElement(A.cX,{validationGroup:"frmInvExcel"+this.tabIndex},T.createElement(A.n2,{message:this.t("validExcel")})))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("grdPurcInv.clmDiscount"),alignment:"right"}),T.createElement(A.ZP,{id:"txtPopExcelDisc",parent:this,simple:!0,notRefresh:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value},T.createElement(A.cX,{validationGroup:"frmInvExcel"+this.tabIndex},T.createElement(A.n2,{message:this.t("validExcel")})))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("grdPurcInv.clmDiscountRate"),alignment:"right"}),T.createElement(A.ZP,{id:"txtPopExcelDiscRate",parent:this,simple:!0,notRefresh:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value},T.createElement(A.cX,{validationGroup:"frmInvExcel"+this.tabIndex},T.createElement(A.n2,{message:this.t("validExcel")})))),T.createElement(x.Item,null,T.createElement(x.Label,{text:this.t("grdPurcInv.clmVat"),alignment:"right"}),T.createElement(A.ZP,{id:"txtPopExcelVat",parent:this,simple:!0,notRefresh:!0,upper:this.sysParam.filter({ID:"onlyBigChar",USERS:this.user.CODE}).getValue().value},T.createElement(A.cX,{validationGroup:"frmInvExcel"+this.tabIndex},T.createElement(A.n2,{message:this.t("validExcel")}))))),T.createElement(v(),{colCount:2},T.createElement(x.Item,null,T.createElement("input",{type:"file",name:"upload",id:"upload",text:"Excel AktarÄ±m",onChange:function(t){if(t.preventDefault(),t.target.files){var e=new FileReader;e.onload=function(t){var e=t.target.result,n=U.ij(e,{type:"array"}),a=n.SheetNames[0],i=n.Sheets[a],r=U.P6.sheet_to_json(i);o.popExcel.hide(),o.excelAdd(r)},e.readAsArrayBuffer(t.target.files[0])}}})),T.createElement(x.Item,null,T.createElement(V.Z,{id:"btnShemaSave",parent:this,text:this.t("shemaSave"),type:"default",onClick:(0,s.Z)(h().mark((function t(){var e;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={CODE:o.txtPopExcelCode.value,QTY:o.txtPopExcelQty.value,PRICE:o.txtPopExcelPrice.value,DISC:o.txtPopExcelDisc.value,DISC_PER:o.txtPopExcelDiscRate.value,TVA:o.txtPopExcelVat.value},o.prmObj.add({ID:"excelFormat",VALUE:e,USERS:o.user.CODE,APP:"OFF",TYPE:1,PAGE:"ftr_02_001"}),t.next=4,o.prmObj.save();case 4:case"end":return t.stop()}}),t)})))}))))),T.createElement(k.Z,{id:"pg_adress",parent:this,container:"#root",visible:!1,position:{of:"#root"},showTitle:!0,showBorders:!0,width:"90%",height:"90%",title:this.t("pg_adress.title")},T.createElement(L.sg,{dataField:"ADRESS",caption:this.t("pg_adress.clmAdress"),width:250}),T.createElement(L.sg,{dataField:"CITY",caption:this.t("pg_adress.clmCiyt"),width:150}),T.createElement(L.sg,{dataField:"ZIPCODE",caption:this.t("pg_adress.clmZipcode"),width:300,defaultSortOrder:"asc"}),T.createElement(L.sg,{dataField:"COUNTRY",caption:this.t("pg_adress.clmCountry"),width:200}))))}}]),rt}(T.PureComponent)}}]);